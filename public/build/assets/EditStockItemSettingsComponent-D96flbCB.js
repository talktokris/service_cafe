import{r as n,j as e,b as S}from"./app-CeALoAiy.js";function I({stockItem:a,onClose:f,onSuccess:u,officeProfiles:j=[]}){const[i,d]=n.useState({headOfficeId:"",branchId:"",itemName:"",itemType:"food",activeStatus:1}),[l,m]=n.useState({}),[o,h]=n.useState(!1),b=j.filter(t=>t.profileType==="HeadOffice"&&t.deleteStatus===0),N=j.filter(t=>t.profileType==="BranchOffice"&&t.deleteStatus===0);n.useEffect(()=>{a&&d({headOfficeId:a.headOfficeId||"",branchId:a.branchId||"",itemName:a.itemName||"",itemType:a.itemType||"food",activeStatus:a.activeStatus||0})},[a]);const c=t=>{const{name:s,value:r,type:x,checked:v}=t.target;d(p=>({...p,[s]:x==="checkbox"?v:r})),l[s]&&m(p=>({...p,[s]:null}))},g=()=>{const t={};return i.headOfficeId||(t.headOfficeId="Head Office is required"),i.itemName||(t.itemName="Item name is required"),i.itemType||(t.itemType="Item type is required"),m(t),Object.keys(t).length===0},y=async t=>{if(t.preventDefault(),!!g()){h(!0);try{S.put(`/stock-item-settings/${a.id}`,i,{onSuccess:s=>{var r;if((r=s.props.flash)!=null&&r.success&&console.log(s.props.flash.success),s.props.stockItemSetting)u(s.props.stockItemSetting);else{const x={...a,...i,updated_at:new Date().toISOString()};u(x)}},onError:s=>{m(s)},onFinish:()=>{h(!1)}})}catch(s){console.error("Error updating stock item setting:",s),h(!1)}}};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit Stock Item Setting: ",a.itemName]}),e.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Office Selection"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Head Office *"})}),e.jsxs("select",{name:"headOfficeId",value:i.headOfficeId,onChange:c,className:`select select-bordered w-full ${l.headOfficeId?"select-error":""}`,children:[e.jsx("option",{value:"",children:"Select Head Office"}),b.map(t=>e.jsx("option",{value:t.id,children:t.companyName},t.id))]}),l.headOfficeId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.headOfficeId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Branch Office"})}),e.jsxs("select",{name:"branchId",value:i.branchId,onChange:c,className:"select select-bordered w-full",children:[e.jsx("option",{value:"",children:"Select Branch Office (Optional)"}),N.map(t=>e.jsx("option",{value:t.id,children:t.companyName},t.id))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Item Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Item Name *"})}),e.jsx("input",{type:"text",name:"itemName",value:i.itemName,onChange:c,className:`input input-bordered w-full ${l.itemName?"input-error":""}`,placeholder:"e.g., Rice, Coffee, Sugar"}),l.itemName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.itemName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Item Type *"})}),e.jsxs("select",{name:"itemType",value:i.itemType,onChange:c,className:`select select-bordered w-full ${l.itemType?"select-error":""}`,children:[e.jsx("option",{value:"food",children:"Food"}),e.jsx("option",{value:"drink",children:"Drink"})]}),l.itemType&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.itemType})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Status"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"activeStatus",checked:i.activeStatus===1,onChange:t=>d(s=>({...s,activeStatus:t.target.checked?1:0})),className:"checkbox checkbox-primary mr-3"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active Status"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:f,className:"btn btn-ghost",disabled:o,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Updating..."]}):"Update Stock Item"})]})]})]})}):null}export{I as default};
