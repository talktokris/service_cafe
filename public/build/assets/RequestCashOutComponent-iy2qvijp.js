import{r as l,u as R,j as e}from"./app-GQ-hLdfW.js";import{P as E}from"./PrimaryButton-DDLwr1AA.js";import{T as I}from"./TextInput-B-gj2a4q.js";import{I as P}from"./InputLabel-CigIhyQ-.js";function L({isOpen:f,onClose:m,currentBalance:t=0,onCashOutSuccess:a}){const[h,p]=l.useState(!1),[v,r]=l.useState(""),[d,i]=l.useState(""),[n,j]=l.useState(""),{data:o,setData:w,post:k,processing:g,errors:N,reset:u}=R({amount:""});l.useEffect(()=>{f||(u(),r(""),i(""),j(""))},[f,u]),l.useEffect(()=>{if(!o.amount){i("");return}const s=parseFloat(o.amount);if(isNaN(s)||s<=0){i("Please enter a valid cash out amount.");return}if(s>t){i(`Amount must not exceed your current balance of ${c(t)}.`);return}i("")},[o.amount,t]);const c=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s),M=s=>{if(s.preventDefault(),r(""),d){r(d);return}const b=parseFloat(o.amount);if(!o.amount||isNaN(b)||b<=0){r("Please enter a valid cash out amount.");return}if(b>t){r(`Amount must not exceed your current balance of ${c(t)}.`);return}p(!0),k(route("cash.out.create"),{onSuccess:x=>{var y;(y=x.props.flash)!=null&&y.success?(r(""),j(x.props.flash.success),setTimeout(()=>{a==null||a(),m(),u()},3e3)):(a==null||a(),m(),u())},onError:x=>{r(x.message||"An error occurred while processing cash out request.")},onFinish:()=>{p(!1)}})};return f?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Request Cash Out"}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Cash Wallet Balance:"}),e.jsx("span",{className:"text-xl font-bold text-green-700",children:c(t)})]})}),e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(P,{htmlFor:"amount",value:"Cash Out Amount"}),n&&e.jsx("div",{className:"mt-2 mb-3 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("div",{className:"text-sm font-medium text-green-800",children:n})]})}),(d||v)&&!n&&e.jsx("div",{className:"mt-2 mb-3 p-3 bg-orange-50 border border-orange-200 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-orange-500 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("div",{className:"text-sm font-medium text-orange-800",children:d||v})]})}),e.jsx(I,{id:"amount",type:"number",step:"0.01",min:"0.01",max:t,className:"mt-1 block w-full",placeholder:`Enter amount (max: ${c(t)})`,value:o.amount,onChange:s=>w("amount",s.target.value),disabled:!!n,required:!0}),N.amount&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:N.amount})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",disabled:g||h||n,children:"Cancel"}),e.jsx(E,{type:"submit",disabled:g||h||n,className:"px-4 py-2",children:g||h?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):"Request Cash Out"})]})]})]})})}):null}export{L as default};
