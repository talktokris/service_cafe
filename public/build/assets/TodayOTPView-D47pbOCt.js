import{r as i,u as H,j as e,H as W}from"./app-Cy0UIO-x.js";import z from"./AdminDashboardLayout-BpZyWZxY.js";import"./AdminHeader-BaURRXR2.js";import"./AdminFooter-DakFZbq2.js";import"./AdminSidebar-DeOPduxW.js";const $=`
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }
`;function K({auth:h,todayOrders:u=[],filters:a={},availableDates:d=[]}){const L=h==null?void 0:h.user,[n,y]=i.useState((a==null?void 0:a.search)||""),[p,S]=i.useState(u),[s,_]=i.useState((a==null?void 0:a.date_filter)||"today"),[c,P]=i.useState(new Set),[v,f]=i.useState(new Set),{data:j,setData:D,get:m,processing:g}=H({search:(a==null?void 0:a.search)||"",date_filter:(a==null?void 0:a.date_filter)||"today"}),[w,N]=i.useState(!1),F=()=>{N(!0),m(route("today-otp"),{data:{...j},preserveState:!1,replace:!1,onFinish:()=>N(!1)})},M=t=>{const r=new Set(c);r.has(t)?r.delete(t):r.add(t),P(r)},V=(t,r)=>{navigator.clipboard.writeText(t);const l=new Set(v);l.add(r),f(l),setTimeout(()=>{f(x=>{const o=new Set(x);return o.delete(r),o})},3e3)},k=t=>{_(t),D("date_filter",t),m(route("today-otp"),{data:{...j,date_filter:t,search:n},preserveState:!0,replace:!0})},O=()=>{m(route("today-otp"),{data:{search:n,date_filter:s},preserveState:!0,replace:!0})};i.useEffect(()=>{S(u)},[u]);const b=()=>{if(s==="all")return"All OTP Orders";if(s==="today")return"Today's OTP Orders";const t=d.find(r=>r.value===s);return t?`OTP Orders - ${t.label}`:"OTP Orders"},A=()=>{if(s==="all")return"View and manage all orders with OTP authentication";if(s==="today")return"View and manage today's orders with OTP authentication";const t=d.find(r=>r.value===s);return t?`View and manage orders from ${t.label} with OTP authentication`:"View and manage orders with OTP authentication"},T=()=>{if(n)return"Filtered";if(s==="all")return"All";if(s==="today")return"Today's";const t=d.find(r=>r.value===s);return t?t.label:"Orders"},C=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t||0);return e.jsxs(z,{title:`${b()} - Serve Cafe`,user:L,children:[e.jsx(W,{title:b()}),e.jsx("style",{dangerouslySetInnerHTML:{__html:$}}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:b()}),e.jsx("p",{className:"text-sm text-gray-600",children:A()})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.length}),e.jsxs("div",{className:"text-sm text-gray-500",children:[T()," Orders"]})]})]})})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:e.jsx("div",{className:"bg-gray-100 p-1 rounded-lg mb-4",children:e.jsxs("div",{className:"flex overflow-x-auto scrollbar-hide space-x-1",children:[e.jsx("button",{onClick:()=>k("all"),className:`flex-shrink-0 px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap ${s==="all"?"bg-white text-blue-600 shadow-sm ring-1 ring-blue-200":"text-gray-600 hover:text-blue-600 hover:bg-gray-50"}`,children:"All"}),d.map(t=>e.jsx("button",{onClick:()=>k(t.is_today?"today":t.value),className:`flex-shrink-0 px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap ${t.is_today&&s==="today"||!t.is_today&&s===t.value?"bg-white text-blue-600 shadow-sm ring-1 ring-blue-200":"text-gray-600 hover:text-blue-600 hover:bg-gray-50"}`,children:t.label},t.value))]})})})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:n,onChange:t=>y(t.target.value),onKeyPress:t=>t.key==="Enter"&&O(),placeholder:"Search by Order ID, OTP, member name, or email...",className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),e.jsx("button",{onClick:O,disabled:g,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 transition-colors text-sm font-medium",children:g?"Searching...":"Search"}),n&&e.jsx("button",{onClick:()=>{y(""),m(route("today-otp"),{data:{search:"",date_filter:s},preserveState:!0,replace:!0})},className:"px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors text-sm font-medium",children:"Clear"}),e.jsx("button",{onClick:F,disabled:w||g,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 transition-colors text-sm font-medium flex items-center",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b border-white mr-2"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Load Data"]})})]})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),e.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:n?"No matching orders found":s==="all"?"No OTP orders found":s==="today"?"No OTP orders today":`No OTP orders for ${T()}`}),e.jsx("p",{className:"text-gray-500",children:n?"Try adjusting your search terms":"Orders with OTP will appear here"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member Info"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"OTP"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(t=>{var r,l,x,o;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["Order #",t.id]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Table:"," ",((r=t.table)==null?void 0:r.tableShortName)||"N/A"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[new Date(t.created_at).toLocaleDateString()," ","at"," ",new Date(t.created_at).toLocaleTimeString()]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.memberUser&&`${t.memberUser.first_name||""} ${t.memberUser.last_name||""}`.trim()||"Walking Customer"}),e.jsx("div",{className:"text-sm text-gray-500",children:((l=t.memberUser)==null?void 0:l.email)||"No email"}),e.jsx("div",{className:"text-sm text-gray-500",children:((x=t.memberUser)==null?void 0:x.phone)||"No phone"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-1 ${t.free_paid_member_status===1?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"}`,children:t.free_paid_member_status===1?"ðŸ’Ž Paid":"ðŸ†“ Free"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2 relative",children:[v.has(t.id)&&e.jsxs("div",{className:"absolute -top-10 left-0 bg-green-600 text-white text-xs px-2 py-1 rounded shadow-lg z-10 animate-pulse",children:["OTP copied to clipboard!",e.jsx("div",{className:"absolute top-full left-3 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-green-600"})]}),e.jsx("div",{className:"text-lg font-mono font-bold text-blue-600 bg-blue-50 px-3 py-1 rounded-lg",children:c.has(t.id)?t.txn_otp:"â€¢".repeat(((o=t.txn_otp)==null?void 0:o.length)||6)}),e.jsx("button",{onClick:()=>M(t.id),className:"p-1 text-gray-500 hover:text-blue-600 transition-colors",title:c.has(t.id)?"Hide OTP":"Show OTP",children:c.has(t.id)?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{onClick:()=>V(t.txn_otp,t.id),className:"p-1 text-gray-500 hover:text-green-600 transition-colors",title:"Copy OTP",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:C(t.sellingPrice)}),t.discountAmount>0&&e.jsxs("div",{className:"text-sm text-red-600",children:["Discount:"," ",C(t.discountAmount)]})]})]},t.id)})})]})})})]})}export{K as default};
