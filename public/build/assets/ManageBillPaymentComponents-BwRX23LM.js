import{r as o,j as e,b as B}from"./app-GQ-hLdfW.js";import ne from"./ViewItemsComponents-B3b07Igw.js";import oe from"./AddMenuItemComponents-DShAEpRh.js";import re from"./EditMenuItemComponents-BNUFW_fe.js";import de from"./DeleteMenuItemComponents-DsJcA0lA.js";import ce from"./PayBillComponents-CZ6cckID.js";import ie from"./PrintReceiptComponents-DqI4uv9C.js";import me from"./TableUserConfirmComponent-B99yT-RH.js";import"./FindMemberComponent-DQdquD1k.js";function ye({user:n,restaurantTables:u=[],menuItems:x=[],orders:j=[],orderItems:b=[]}){var T,A,P,D;const[R,V]=o.useState(u),[U,v]=o.useState(!1),[H,N]=o.useState(!1),[W,y]=o.useState(!1),[$,w]=o.useState(!1),[F,I]=o.useState(!1),[q,k]=o.useState(!1),[f,d]=o.useState(null),[l,r]=o.useState(null),[p,c]=o.useState(null),[z,he]=o.useState({}),[m,Q]=o.useState({}),[G,S]=o.useState(!1);o.useEffect(()=>{console.log("RestaurantTables received:",u),console.log("MenuItems received:",x),console.log("Orders received:",j),console.log("OrderItems received:",b),console.log("User received:",n),V(u),J()},[u,x,j,b,n]);const J=()=>{const t={};j.filter(s=>n.branchId?s.headOfficeId==n.headOfficeId&&s.branchId==n.branchId&&s.tableOccupiedStatus===1&&s.deleteStatus===0:s.headOfficeId==n.headOfficeId&&s.tableOccupiedStatus===1&&s.deleteStatus===0).forEach(s=>{if(s.tableId){const te=s.tableId,O=b.filter(i=>i.orderId===s.id&&i.deleteStatus===0),L=O.reduce((i,g)=>{const C=parseFloat(g.sellingPrice)||0,ae=parseInt(g.quantity)||0;return i+C*ae},0),E=O.reduce((i,g)=>{const C=parseFloat(g.taxAmount)||0;return i+C},0),se=L+E,le=O.length;t[te]={isOccupied:!0,orderId:s.id,totalAmount:se,subtotal:L,totalTax:E,itemCount:le,order:s}}}),Q(t)},M=R.filter(t=>(console.log("Table:",t),console.log("User:",n),console.log("Table headOfficeId:",t.headOfficeId,"User headOfficeId:",n.headOfficeId),console.log("Table branchId:",t.branchId,"User branchId:",n.branchId),n.branchId?t.headOfficeId==n.headOfficeId&&t.branchId==n.branchId&&t.deleteStatus===0:t.headOfficeId==n.headOfficeId&&t.deleteStatus===0)),h=t=>{const a=m[t];return a&&a.isOccupied?{isOccupied:!0,totalAmount:a.totalAmount,itemCount:a.itemCount,orderId:a.orderId,order:a.order}:{isOccupied:!1,totalAmount:0,itemCount:0,orderId:null,order:null}},K=t=>{const s=h(t.id).isOccupied;r(t),s?v(!0):S(!0)},X=t=>{r(t),N(!0)},Y=(t,a)=>{c(t),y(!0),d(()=>a)},Z=(t,a)=>{c(t),w(!0),d(()=>a)},_=t=>{r(t),I(!0)},ee=t=>{r(t),k(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Tables"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:M.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Orders"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Object.keys(z).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"₹0"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pending Bills"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"0"})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:M.length===0?e.jsx("div",{className:"col-span-full text-center py-12",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Tables Available"}),e.jsx("p",{className:"text-gray-500",children:"No restaurant tables found for your office."})]})}):M.map(t=>{const a=h(t.id),s=a.isOccupied;return e.jsx("div",{onClick:()=>K(t),className:`rounded-lg shadow-sm border p-6 cursor-pointer hover:shadow-md transition-all duration-200 ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${s?"bg-gray-700":"bg-blue-100"}`,children:e.jsx("span",{className:`text-2xl font-bold ${s?"text-white":"text-blue-600"}`,children:t.tableShortName||"T"})}),e.jsx("h3",{className:`text-xl font-bold mb-2 ${s?"text-white":"text-gray-900"}`,children:t.tableShortName||"Table"}),e.jsx("p",{className:`text-sm mb-4 ${s?"text-gray-300":"text-gray-600"}`,children:t.tableShortFullName||"Table Description"}),s?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Total Amount:"}),e.jsxs("span",{className:"font-semibold text-green-400",children:["₹",a.totalAmount.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Items:"}),e.jsx("span",{className:"font-semibold text-white",children:a.itemCount})]})]}):e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Ready to Use"})})]})},t.id)})}),G&&l&&e.jsx(me,{table:l,user:n,onClose:()=>{S(!1),r(null)},onConfirm:()=>{S(!1),B.reload(),setTimeout(()=>{v(!0)},1e3)}}),U&&l&&e.jsx(ne,{table:l,order:h(l.id).order,onClose:()=>{v(!1),r(null)},onAddItem:()=>X(l),onEditItem:Y,onDeleteItem:Z,onMakePayment:()=>_(l),onPrintReceipt:()=>ee(l),menuItems:x}),H&&l&&e.jsx(oe,{table:l,user:n,order:h(l.id).order,onClose:()=>{N(!1),r(null)},onSuccess:()=>{N(!1),r(null),B.reload()},menuItems:x}),W&&p&&e.jsx(re,{menuItem:p,onClose:()=>{y(!1),c(null),d(null)},onSuccess:()=>{y(!1),c(null),f&&f(),d(null)}}),$&&p&&e.jsx(de,{menuItem:p,onClose:()=>{w(!1),c(null),d(null)},onSuccess:()=>{w(!1),c(null),f&&f(),d(null)}}),F&&l&&e.jsx(ce,{table:l,orderId:((T=m[l.id])==null?void 0:T.orderId)||null,orderTotal:((A=m[l.id])==null?void 0:A.totalAmount)||0,orderSubtotal:((P=m[l.id])==null?void 0:P.subtotal)||0,orderTax:((D=m[l.id])==null?void 0:D.totalTax)||0,onClose:()=>{I(!1),r(null)},onSuccess:t=>{I(!1),r(null),t.paymentProcessed&&window.location.reload()}}),q&&l&&e.jsx(ie,{table:l,order:h(l.id).order,onClose:()=>{k(!1),r(null)}})]})}export{ye as default};
