import{r as l,j as e}from"./app-C-EhCx0Q.js";import R from"./CreateRestaurantTableComponent-LLraol-E.js";import z from"./EditRestaurantTableComponent-jwo36Lbs.js";import D from"./DeleteRestaurantTableComponent-BXUxCruI.js";function $({user:I,restaurantTables:o=[],officeProfiles:d=[]}){const[a,c]=l.useState(o),[w,h]=l.useState(!1),[y,m]=l.useState(!1),[S,x]=l.useState(!1),[i,n]=l.useState(null),[u,k]=l.useState(""),[j,C]=l.useState("all"),[f,T]=l.useState("all");l.useEffect(()=>{c(o)},[o]);const M=d.filter(s=>s.profileType==="HeadOffice"&&s.deleteStatus===0),O=d.filter(s=>s.profileType==="BranchOffice"&&s.deleteStatus===0),g=a.filter(s=>{var N,p;const t=((N=s.tableShortName)==null?void 0:N.toLowerCase().includes(u.toLowerCase()))||((p=s.tableShortFullName)==null?void 0:p.toLowerCase().includes(u.toLowerCase())),r=j==="all"||s.headOfficeId==j,b=f==="all"||s.branchId==f;return t&&r&&b&&s.deleteStatus===0}),L=s=>{console.log("New table received in handleCreateTable:",s),console.log("Current tables before update:",a),c(t=>{const r=[...t,s];return console.log("Updated tables:",r),r}),h(!1)},B=s=>{c(a.map(t=>t.id===s.id?s:t)),m(!1),n(null)},H=s=>{c(a.map(t=>t.id===s?{...t,deleteStatus:1}:t)),x(!1),n(null)},A=s=>{n(s),m(!0)},E=s=>{n(s),x(!0)},v=(s,t)=>{if(!s)return"N/A";const r=d.find(b=>b.id==s);return r?r.companyName:"Unknown"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Restaurant Table Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage restaurant tables for head offices and branch offices"})]}),e.jsxs("button",{onClick:()=>h(!0),className:"btn bg-red-600 hover:bg-red-700 text-white",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Table"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Tables"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.filter(s=>s.deleteStatus===0).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Head Office Tables"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.filter(s=>s.headOfficeId&&s.deleteStatus===0).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Branch Office Tables"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.filter(s=>s.branchId&&s.deleteStatus===0).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Tables"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.filter(s=>s.activeStatus===1&&s.deleteStatus===0).length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"text",placeholder:"Search tables...",value:u,onChange:s=>k(s.target.value),className:"input input-bordered w-full"})}),e.jsx("div",{children:e.jsxs("select",{value:j,onChange:s=>C(s.target.value),className:"select select-bordered w-full",children:[e.jsx("option",{value:"all",children:"All Head Offices"}),M.map(s=>e.jsx("option",{value:s.id,children:s.companyName},s.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:f,onChange:s=>T(s.target.value),className:"select select-bordered w-full",children:[e.jsx("option",{value:"all",children:"All Branch Offices"}),O.map(s=>e.jsx("option",{value:s.id,children:s.companyName},s.id))]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Restaurant Tables (",g.length,")"]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Table Name"}),e.jsx("th",{children:"Full Name"}),e.jsx("th",{children:"Head Office"}),e.jsx("th",{children:"Branch Office"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-8 text-gray-500",children:"No restaurant tables found"})}):g.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{className:"font-bold",children:s.tableShortName||"N/A"})}),e.jsx("td",{children:e.jsx("div",{className:"font-medium",children:s.tableShortFullName||"N/A"})}),e.jsx("td",{children:v(s.headOfficeId)}),e.jsx("td",{children:v(s.branchId)}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.activeStatus===1?"badge-success":"badge-warning"}`,children:s.activeStatus===1?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>A(s),className:"btn btn-ghost btn-xs text-blue-600 hover:bg-blue-50",children:"Edit"}),e.jsx("button",{onClick:()=>E(s),className:"btn btn-ghost btn-xs text-red-600 hover:bg-red-50",children:"Delete"})]})})]},s.id))})]})})})]}),w&&e.jsx(R,{onClose:()=>h(!1),onSuccess:L,officeProfiles:d}),y&&i&&e.jsx(z,{table:i,onClose:()=>{m(!1),n(null)},onSuccess:B,officeProfiles:d}),S&&i&&e.jsx(D,{table:i,onClose:()=>{x(!1),n(null)},onSuccess:H})]})}export{$ as default};
