import{r as m,u as M,j as e,H as W}from"./app-BF4HM74z.js";import D from"./MemberDashboardLayout-wpAEyyHB.js";import F from"./Breadcrumb-BCvkiI-2.js";import H from"./RequestCashOutComponent-CjDvxYFS.js";import O from"./TransferPurchaseBalanceComponent-BkpuViEh.js";import"./MemberHeader-B42Jzed-.js";import"./MemberSidebar-CoBueM0a.js";import"./PaidMemberSidebar-Bz_KC03p.js";import"./FreeMemberSidebar-sdrpYOAZ.js";import"./MemberFooter-Gk6CquVV.js";import"./PrimaryButton-DztQd12r.js";import"./TextInput-tiV_yeV5.js";import"./InputLabel-C_F4gezG.js";function X({auth:h,transactions:p,summary:s,filters:r,walletBalance:b}){const w=h.user.member_type||"paid",[N,i]=m.useState(!1),[v,x]=m.useState(!1),[y,I]=m.useState({from_date:(r==null?void 0:r.from_date)||"",to_date:(r==null?void 0:r.to_date)||"",type:(r==null?void 0:r.type)||""}),{data:o,setData:d,get:u,processing:g}=M(y),k=t=>{t.preventDefault(),u("/cash-wallet",{data:o,preserveState:!0,replace:!0})},C=()=>{d({from_date:"",to_date:"",type:""}),u("/cash-wallet",{data:{from_date:"",to_date:"",type:""},preserveState:!0,replace:!0})},a=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t),_=t=>new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=t=>{switch(t){case 1:return"Cash In";case 2:return"Tax";case 3:return"Withdrawal";case 4:return"Transfer";default:return"Unknown"}},S=t=>{switch(t){case 1:return"text-green-600 bg-green-100";case 2:return"text-red-600 bg-red-100";case 3:return"text-orange-600 bg-orange-100";case 4:return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},f=p?[...p].sort((t,n)=>n.id-t.id):[],c=[];let l=(s==null?void 0:s.total_balance)||0;for(let t=0;t<f.length;t++){const n=f[t];if(t===0)c.push({...n,calculatedBalance:l});else{const j=parseFloat(n.amount)||0;n.debit_credit===1?l=l+j:l=l-j,c.push({...n,calculatedBalance:l})}}const B=()=>{i(!1),window.location.reload()},L=()=>{x(!1),window.location.reload()};return e.jsxs(D,{title:"Cash Wallet - Serve Cafe",user:h.user,memberType:w,walletBalance:b,children:[e.jsx(W,{title:"Cash Wallet"}),e.jsxs("div",{children:[e.jsx(F,{title:"Cash Wallet",links:["Home","Cash Wallet"],icon:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"p-3 sm:p-4 lg:p-6 space-y-4 sm:space-y-6 w-[100vw]",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4m16 0l4-4m-4 4l4 4"})})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-600",children:"Total Cash In"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-green-900",children:a((s==null?void 0:s.total_cash_in)||0)})]})]})}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4m16 0l-4-4m4 4l-4 4"})})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-600",children:"Total Cash Out"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-red-900",children:a((s==null?void 0:s.total_cash_out)||0)})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-600",children:"Total Transfer"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-900",children:a((s==null?void 0:s.total_transfer)||0)})]})]})}),e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-purple-600",children:"Total Balance"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-purple-900",children:a((s==null?void 0:s.total_balance)||0)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-4",children:"Search Cash Wallet Transactions"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"from_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",id:"from_date",value:o.from_date,onChange:t=>d("from_date",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-gray-900 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"to_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",id:"to_date",value:o.to_date,onChange:t=>d("to_date",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-gray-900 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Type"}),e.jsxs("select",{id:"type",value:o.type,onChange:t=>d("type",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-gray-900 text-sm",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"1",children:"Cash In"}),e.jsx("option",{value:"2",children:"Tax"}),e.jsx("option",{value:"3",children:"Withdrawal"}),e.jsx("option",{value:"4",children:"Transfer"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-amber-600 text-white px-4 py-2 rounded-md hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:g?"Searching...":"Search"})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:C,className:"text-sm text-gray-600 hover:text-gray-800 underline",children:"Reset Filters"})})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:"Cash Wallet Transactions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>i(!0),className:"bg-red-600 text-white px-3 py-1.5 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-all duration-200 flex items-center text-xs font-medium shadow-sm hover:shadow-md",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4m16 0l-4-4m4 4l-4 4"})}),"Cash Out"]}),e.jsxs("button",{onClick:()=>x(!0),className:"bg-blue-600 text-white px-3 py-1.5 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 flex items-center text-xs font-medium shadow-sm hover:shadow-md",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Transfer"]})]})]}),c.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction ID"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Debit/Credit"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900",children:_(t.transaction_date)}),e.jsxs("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900",children:["#",t.id]}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900",children:t.name}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S(t.transaction_type)}`,children:T(t.transaction_type)})}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.debit_credit===1?"text-red-600 bg-red-100":"text-green-600 bg-green-100"}`,children:t.debit_credit===1?"Debit":"Credit"})}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("span",{className:t.debit_credit===1?"text-red-600":"text-green-600",children:[t.debit_credit===1?"-":"+"," ",a(t.amount)]})}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900",children:a(t.calculatedBalance)})]},t.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No transactions found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No cash wallet transactions match your current search criteria."})]})]})})]})]}),e.jsx(H,{isOpen:N,onClose:()=>i(!1),currentBalance:(s==null?void 0:s.total_balance)||0,onCashOutSuccess:B}),e.jsx(O,{isOpen:v,onClose:()=>x(!1),currentBalance:(s==null?void 0:s.total_balance)||0,onTransferSuccess:L})]})}export{X as default};
