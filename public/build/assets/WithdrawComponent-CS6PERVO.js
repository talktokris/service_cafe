import{r as d,u as E,j as e}from"./app-BF4HM74z.js";import{P as F}from"./PrimaryButton-DztQd12r.js";import{T as I}from"./TextInput-tiV_yeV5.js";import{I as P}from"./InputLabel-C_F4gezG.js";function V({isOpen:g,onClose:u,currentBalance:a=0,minWithdrawalAmount:t=1e3,onWithdrawSuccess:l}){const[b,v]=d.useState(!1),[j,r]=d.useState(""),[c,n]=d.useState(""),[i,N]=d.useState(""),{data:o,setData:M,post:k,processing:p,errors:w,reset:x}=E({amount:""});d.useEffect(()=>{g||(x(),r(""),n(""),N(""))},[g,x]),d.useEffect(()=>{if(!o.amount){n("");return}const s=parseFloat(o.amount);if(isNaN(s)||s<=0){n("Please enter a valid withdrawal amount.");return}if(s<t){n(`Minimum withdrawal amount is ${m(t)}.`);return}if(s>a){n(`Value must be less than or equal to ${a.toFixed(2)}.`);return}n("")},[o.amount,a,t]);const m=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s),C=s=>{if(s.preventDefault(),r(""),c){r(c);return}const f=parseFloat(o.amount);if(!o.amount||isNaN(f)||f<=0){r("Please enter a valid withdrawal amount.");return}if(f<t){r(`Minimum withdrawal amount is ${m(t)}.`);return}if(f>a){r(`Value must be less than or equal to ${a.toFixed(2)}.`);return}v(!0),k(route("withdrawal.create"),{onSuccess:h=>{var y;(y=h.props.flash)!=null&&y.success?(r(""),N(h.props.flash.success),setTimeout(()=>{l==null||l(),u(),x()},3e3)):(l==null||l(),u(),x())},onError:h=>{r(h.message||"An error occurred while processing withdrawal.")},onFinish:()=>{v(!1)}})};return g?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 max-w-[90vw] shadow-lg rounded-md bg-white overflow-hidden",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Create Withdrawal"}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Earning Balance:"}),e.jsx("span",{className:"text-xl font-bold text-green-700",children:m(a)})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Minimum withdrawal:"," ",m(t)]})]}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(P,{htmlFor:"amount",value:"Withdrawal Amount"}),i&&e.jsx("div",{className:"mt-2 mb-3 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("div",{className:"text-sm font-medium text-green-800",children:i})]})}),(c||j)&&!i&&e.jsx("div",{className:"mt-2 mb-3 p-3 bg-orange-50 border border-orange-200 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-orange-500 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("div",{className:"text-sm font-medium text-orange-800",children:c||j})]})}),e.jsx(I,{id:"amount",type:"number",step:"0.01",min:t,max:a,className:"mt-1 block w-full",placeholder:`Enter amount (min: ${m(t)})`,value:o.amount,onChange:s=>M("amount",s.target.value),disabled:!!i,required:!0}),w.amount&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:w.amount})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",disabled:p||b||i,children:"Cancel"}),e.jsx(F,{type:"submit",disabled:p||b||i,className:"px-4 py-2",children:p||b?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):"Create Withdrawal"})]})]})]})})}):null}export{V as default};
