import{r as h,u as w,j as e,H as _,L as g}from"./app-Cy0UIO-x.js";import k from"./AdminDashboardLayout-BpZyWZxY.js";import M from"./TopupFundComponent-Bc-WW3rW.js";import"./AdminHeader-BaURRXR2.js";import"./AdminFooter-DakFZbq2.js";import"./AdminSidebar-DeOPduxW.js";function R({auth:p,transactions:d,summary:a,filters:r,member:s,encodedUserId:o}){const[u,T]=h.useState({transaction_id:(r==null?void 0:r.transaction_id)||"",from_date:(r==null?void 0:r.from_date)||"",to_date:(r==null?void 0:r.to_date)||""}),[f,c]=h.useState(!1),{data:i,setData:l,get:x,processing:m}=w(u),j=t=>{t.preventDefault(),x(`/member-transactions/${o}`,{data:i,preserveState:!0,replace:!0})},b=()=>{l({transaction_id:"",from_date:"",to_date:""}),x(`/member-transactions/${o}`,{data:{transaction_id:"",from_date:"",to_date:""},preserveState:!0,replace:!0})},y=()=>{c(!1),window.location.reload()},n=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t),N=t=>new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(k,{title:"Member Transactions - Serve Cafe",user:p.user,children:[e.jsx(_,{title:"Member Transactions"}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Member Transactions"}),e.jsxs("nav",{className:"flex items-center space-x-2 text-sm mt-1",children:[e.jsx(g,{href:"/dashboard",className:"font-medium text-gray-600 hover:text-gray-900",children:"Home"}),e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.jsx(g,{href:"/manage-members",className:"font-medium text-gray-600 hover:text-gray-900",children:"Members"}),e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.jsxs("span",{className:"font-medium text-gray-700",children:[s==null?void 0:s.first_name," ",s==null?void 0:s.last_name," - Transactions"]})]})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Member Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[s==null?void 0:s.first_name," ",s==null?void 0:s.last_name]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s==null?void 0:s.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Member Type"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(s==null?void 0:s.member_type)==="paid"?"Paid Member":"Free Member"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4m16 0l-4-4m4 4l-4 4"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-red-600",children:"Total Debits"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:n((a==null?void 0:a.total_debits)||0)})]})]})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4m16 0l4-4m-4 4l4 4"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total Credits"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:n((a==null?void 0:a.total_credits)||0)})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Current Balance"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n((a==null?void 0:a.balance)||0)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Search Transactions"}),e.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",children:"Fund Topup"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"transaction_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction ID"}),e.jsx("input",{type:"text",id:"transaction_id",value:i.transaction_id,onChange:t=>l("transaction_id",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-gray-900 text-sm",placeholder:"Enter transaction ID"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"from_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",id:"from_date",value:i.from_date,onChange:t=>l("from_date",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-gray-900 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"to_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",id:"to_date",value:i.to_date,onChange:t=>l("to_date",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-gray-900 text-sm"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500",children:"Reset"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-amber-800 hover:bg-amber-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 disabled:opacity-50",children:m?"Searching...":"Search"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transaction Statement"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Showing ",(d==null?void 0:d.length)||0," transactions"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Debit"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credit"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d&&d.length>0?d.map((t,v)=>e.jsxs("tr",{className:v%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N(t.transaction_date||t.created_at)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900",children:["#",t.id]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.transaction_nature||"Transaction"}),e.jsx("div",{className:"text-gray-500",children:t.transaction_type})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.debit_credit===1?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:t.debit_credit===1?"Debit":"Credit"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900",children:t.debit_credit===1?n(t.amount):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900",children:t.debit_credit===2?n(t.amount):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-bold text-gray-900",children:n(t.balance)})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-sm text-gray-500",children:"No transactions found"})})})]})})]})]})]}),f&&e.jsx(M,{member:s,encodedUserId:o,onClose:()=>c(!1),onSuccess:y})]})}export{R as default};
