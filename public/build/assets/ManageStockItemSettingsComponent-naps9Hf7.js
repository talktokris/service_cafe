import{r as l,j as e}from"./app-CeALoAiy.js";import F from"./CreateStockItemSettingsComponent-GnFfKtCV.js";import W from"./EditStockItemSettingsComponent-D96flbCB.js";import z from"./DeleteStockItemSettingsComponent-BtDrvulX.js";function G({user:U,stockItemSettings:o=[],officeProfiles:d=[]}){const[a,c]=l.useState(o),[k,h]=l.useState(!1),[S,m]=l.useState(!1),[w,x]=l.useState(!1),[i,n]=l.useState(null),[v,y]=l.useState(""),[u,C]=l.useState("all"),[j,I]=l.useState("all"),[f,O]=l.useState("all");l.useEffect(()=>{c(o)},[o]);const M=d.filter(s=>s.profileType==="HeadOffice"&&s.deleteStatus===0),L=d.filter(s=>s.profileType==="BranchOffice"&&s.deleteStatus===0),g=a.filter(s=>{var N;const t=(N=s.itemName)==null?void 0:N.toLowerCase().includes(v.toLowerCase()),r=u==="all"||s.headOfficeId==u,p=j==="all"||s.branchId==j,H=f==="all"||s.itemType===f;return t&&r&&p&&H&&s.deleteStatus===0}),T=s=>{console.log("New stock item received in handleCreateStockItem:",s),console.log("Current stock items before update:",a),c(t=>{const r=[...t,s];return console.log("Updated stock items:",r),r}),h(!1)},B=s=>{c(a.map(t=>t.id===s.id?s:t)),m(!1),n(null)},A=s=>{c(a.map(t=>t.id===s?{...t,deleteStatus:1}:t)),x(!1),n(null)},E=s=>{n(s),m(!0)},D=s=>{n(s),x(!0)},b=(s,t)=>{if(!s)return"N/A";const r=d.find(p=>p.id==s);return r?r.companyName:"Unknown"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Stock Item Settings Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage stock item settings for head offices and branch offices"})]}),e.jsxs("button",{onClick:()=>h(!0),className:"btn bg-red-600 hover:bg-red-700 text-white",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Stock Item"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Stock Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.filter(s=>s.deleteStatus===0).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Food Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.filter(s=>s.itemType==="food"&&s.deleteStatus===0).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Drink Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.filter(s=>s.itemType==="drink"&&s.deleteStatus===0).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.filter(s=>s.activeStatus===1&&s.deleteStatus===0).length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"text",placeholder:"Search stock items...",value:v,onChange:s=>y(s.target.value),className:"input input-bordered w-full"})}),e.jsx("div",{children:e.jsxs("select",{value:u,onChange:s=>C(s.target.value),className:"select select-bordered w-full",children:[e.jsx("option",{value:"all",children:"All Head Offices"}),M.map(s=>e.jsx("option",{value:s.id,children:s.companyName},s.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:j,onChange:s=>I(s.target.value),className:"select select-bordered w-full",children:[e.jsx("option",{value:"all",children:"All Branch Offices"}),L.map(s=>e.jsx("option",{value:s.id,children:s.companyName},s.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:f,onChange:s=>O(s.target.value),className:"select select-bordered w-full",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"food",children:"Food"}),e.jsx("option",{value:"drink",children:"Drink"})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Stock Item Settings (",g.length,")"]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Item Name"}),e.jsx("th",{children:"Item Type"}),e.jsx("th",{children:"Head Office"}),e.jsx("th",{children:"Branch Office"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:g.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-8 text-gray-500",children:"No stock item settings found"})}):g.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{className:"font-bold",children:s.itemName||"N/A"})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.itemType==="food"?"badge-primary":"badge-secondary"}`,children:s.itemType})}),e.jsx("td",{children:b(s.headOfficeId)}),e.jsx("td",{children:b(s.branchId)}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.activeStatus===1?"badge-success":"badge-warning"}`,children:s.activeStatus===1?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>E(s),className:"btn btn-ghost btn-xs text-blue-600 hover:bg-blue-50",children:"Edit"}),e.jsx("button",{onClick:()=>D(s),className:"btn btn-ghost btn-xs text-red-600 hover:bg-red-50",children:"Delete"})]})})]},s.id))})]})})})]}),k&&e.jsx(F,{onClose:()=>h(!1),onSuccess:T,officeProfiles:d}),S&&i&&e.jsx(W,{stockItem:i,onClose:()=>{m(!1),n(null)},onSuccess:B,officeProfiles:d}),w&&i&&e.jsx(z,{stockItem:i,onClose:()=>{x(!1),n(null)},onSuccess:A})]})}export{G as default};
