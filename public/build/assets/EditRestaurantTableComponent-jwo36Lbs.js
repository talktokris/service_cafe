import{r as i,j as e,b as y}from"./app-C-EhCx0Q.js";function I({table:l,onClose:b,onSuccess:f,officeProfiles:p=[]}){const[s,d]=i.useState({headOfficeId:"",branchId:"",tableShortName:"",tableShortFullName:"",activeStatus:1}),[r,o]=i.useState({}),[h,m]=i.useState(!1),N=p.filter(a=>a.profileType==="HeadOffice"&&a.deleteStatus===0),j=p.filter(a=>a.profileType==="BranchOffice"&&a.deleteStatus===0);i.useEffect(()=>{l&&d({headOfficeId:l.headOfficeId||"",branchId:l.branchId||"",tableShortName:l.tableShortName||"",tableShortFullName:l.tableShortFullName||"",activeStatus:l.activeStatus||0})},[l]);const c=a=>{const{name:t,value:n,type:u,checked:v}=a.target;d(x=>({...x,[t]:u==="checkbox"?v:n})),r[t]&&o(x=>({...x,[t]:null}))},S=()=>{const a={};return s.headOfficeId||(a.headOfficeId="Head Office is required"),s.tableShortName?s.tableShortName.length>20&&(a.tableShortName="Table short name must be 20 characters or less"):a.tableShortName="Table short name is required",s.tableShortFullName?s.tableShortFullName.length>150&&(a.tableShortFullName="Table full name must be 150 characters or less"):a.tableShortFullName="Table full name is required",o(a),Object.keys(a).length===0},g=async a=>{if(a.preventDefault(),!!S()){m(!0);try{y.put(`/restaurant-tables/${l.id}`,s,{onSuccess:t=>{var n;if((n=t.props.flash)!=null&&n.success&&console.log(t.props.flash.success),t.props.restaurantTable)f(t.props.restaurantTable);else{const u={...l,...s,updated_at:new Date().toISOString()};f(u)}},onError:t=>{o(t)},onFinish:()=>{m(!1)}})}catch(t){console.error("Error updating restaurant table:",t),m(!1)}}};return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit Restaurant Table: ",l.tableShortName]}),e.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Office Selection"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Head Office *"})}),e.jsxs("select",{name:"headOfficeId",value:s.headOfficeId,onChange:c,className:`select select-bordered w-full ${r.headOfficeId?"select-error":""}`,children:[e.jsx("option",{value:"",children:"Select Head Office"}),N.map(a=>e.jsx("option",{value:a.id,children:a.companyName},a.id))]}),r.headOfficeId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.headOfficeId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Branch Office"})}),e.jsxs("select",{name:"branchId",value:s.branchId,onChange:c,className:"select select-bordered w-full",children:[e.jsx("option",{value:"",children:"Select Branch Office (Optional)"}),j.map(a=>e.jsx("option",{value:a.id,children:a.companyName},a.id))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Table Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Table Short Name *"})}),e.jsx("input",{type:"text",name:"tableShortName",value:s.tableShortName,onChange:c,className:`input input-bordered w-full ${r.tableShortName?"input-error":""}`,placeholder:"e.g., T1, T2, VIP1",maxLength:"20"}),r.tableShortName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.tableShortName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Table Full Name *"})}),e.jsx("input",{type:"text",name:"tableShortFullName",value:s.tableShortFullName,onChange:c,className:`input input-bordered w-full ${r.tableShortFullName?"input-error":""}`,placeholder:"e.g., Table 1, Table 2, VIP Table 1",maxLength:"150"}),r.tableShortFullName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.tableShortFullName})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Status"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"activeStatus",checked:s.activeStatus===1,onChange:a=>d(t=>({...t,activeStatus:a.target.checked?1:0})),className:"checkbox checkbox-primary mr-3"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active Status"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:b,className:"btn btn-ghost",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Updating..."]}):"Update Table"})]})]})]})}):null}export{I as default};
