import{r as a,j as e}from"./app-GQ-hLdfW.js";import ye from"./FindMemberComponent-DQdquD1k.js";import Ne from"./PrintReceiptComponents-DqI4uv9C.js";function Me({table:f,orderId:$=null,orderTotal:c=0,orderSubtotal:te=0,orderTax:re=0,onClose:R,onSuccess:ae}){const[n,N]=a.useState("cash"),[r,ne]=a.useState("walking"),[u,z]=a.useState(0),[T,W]=a.useState(""),[k,le]=a.useState(""),[v,ie]=a.useState(""),[s,F]=a.useState(null),[j,m]=a.useState(0),[I,M]=a.useState(!1),[oe,C]=a.useState(!1),[S,q]=a.useState(!1),[ce,O]=a.useState(!1),[x,A]=a.useState(null),[L,D]=a.useState(!1),[y,H]=a.useState(!1),[K,p]=a.useState(""),[V,X]=a.useState(0),[de,G]=a.useState(!1),[me,J]=a.useState(!1),[xe,Y]=a.useState(""),[he,Q]=a.useState(!1),_=c-u,b=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t||0),w=t=>{Y(t),J(!0)},ue=()=>{J(!1),Y("")},pe=()=>{O(!1),Q(!0)},be=async t=>{var l;try{M(!0);const i=((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||"",h=await fetch(`/api/member-transactions/${t}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":i},credentials:"same-origin"});if(h.ok){const d=await h.json();if(d.success&&d.transactions){let o=0,E=0;d.transactions.forEach(g=>{const P=parseFloat(g.amount)||0;g.transaction_to_id===s.id?g.debit_credit===2?o+=P:g.debit_credit===1&&(E+=P):g.transaction_from_id===s.id&&(g.debit_credit===1?E+=P:g.debit_credit===2&&(o+=P))});const se=o-E;return m(se),se}else return console.error("Failed to fetch transactions:",d.message),m(0),0}else return console.error("API request failed:",h.status),m(0),0}catch(i){return console.error("Error calculating member balance:",i),m(0),0}finally{M(!1)}};a.useEffect(()=>{s?be(s.id):m(0)},[s]);const ge=async t=>{var l;if(t.preventDefault(),n==="wallet"&&r==="member"&&s){if(j<c){w("Insufficient wallet balance. Please choose a different payment method or add funds to your wallet.");return}if(!y){w("Please request OTP first before processing wallet payment.");return}if(!k||k.length!==6){w("Please enter a valid 6-digit OTP for wallet payment.");return}}q(!0);try{const i=((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||"",h={tableId:f.id,paymentMethod:n,billingType:r,orderTotal:c,discountAmount:u,finalTotal:_,paymentReference:T,notes:v,selectedMember:s,paymentOtp:k},o=await(await fetch("/process-payment",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":i,Accept:"application/json"},credentials:"same-origin",body:JSON.stringify(h)})).json();o.success?(A(o),O(!0)):(console.error("Payment Error:",o),w(o.message||"Payment processing failed. Please try again."))}catch(i){console.error("Error processing payment:",i),w("Payment processing failed. Please try again.")}finally{q(!1)}},U=()=>{O(!1),A(null),ae({tableId:f.id,paymentMethod:n,billingType:r,orderTotal:c,discountAmount:u,finalTotal:_,paymentReference:T,notes:v,selectedMember:s,paymentProcessed:!0})},fe=t=>{F(t),C(!1),H(!1),t&&t.member_type==="paid"?N("wallet"):N("cash"),t&&t.id&&je(t.id)},Z=t=>{ne(t),t==="walking"?(F(null),N("cash"),m(0)):t==="member"&&(C(!0),N("cash"),z(0))},B=t=>{t==="wallet"&&r==="member"&&s&&s.member_type!=="paid"||(N(t),t!=="online"&&W(""))},ee=async()=>{var t;if(!(!s||!f)){D(!0);try{const l=((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||"",h=await(await fetch("/api/request-otp",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":l,Accept:"application/json"},credentials:"same-origin",body:JSON.stringify({tableId:f.id,memberId:s.id})})).json();if(h.success){H(!0),G(!1),p("OTP sent successfully!"),X(30);const d=setInterval(()=>{X(o=>o<=1?(clearInterval(d),G(!0),p(""),0):o-1)},1e3);setTimeout(()=>{p("")},5e3)}else p(h.message||"Failed to send OTP. Please try again."),setTimeout(()=>p(""),5e3)}catch(l){console.error("Error requesting OTP:",l),p("Failed to send OTP. Please try again."),setTimeout(()=>p(""),5e3)}finally{D(!1)}}},je=async t=>{var l;M(!0);try{const i=((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||"",d=await(await fetch(`/api/member-balance/${t}`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":i,Accept:"application/json"},credentials:"same-origin"})).json();d.success?m(d.balance||0):m(0)}catch(i){console.error("Error fetching member balance:",i),m(0)}finally{M(!1)}};return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Make Payment - Table ",f.tableShortName]}),e.jsx("button",{onClick:R,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:ge,className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"w-1/3 p-4 border-r border-gray-200 flex flex-col",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Order Summary"}),e.jsxs("div",{className:"space-y-2",children:[$&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Order ID:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:["#",$]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsx("span",{className:"font-medium",children:b(te)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tax:"}),e.jsx("span",{className:"font-medium text-orange-600",children:b(re)})]}),u>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Discount:"}),e.jsxs("span",{className:"font-medium text-red-600",children:["-",b(u)]})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[e.jsx("span",{children:"Total Amount:"}),e.jsx("span",{className:"text-green-600",children:b(c)})]}),u>0&&e.jsxs("div",{className:"flex justify-between text-lg font-semibold mt-2",children:[e.jsx("span",{children:"Final Amount:"}),e.jsx("span",{className:"text-blue-600",children:b(_)})]})]})]})]})}),e.jsxs("div",{className:"w-2/3 p-4 flex flex-col",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 mb-2 block",children:"Billing Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"billingType",value:"walking",checked:r==="walking",onChange:t=>Z(t.target.value),className:"sr-only"}),e.jsxs("div",{className:`p-3 border rounded-lg text-center transition-colors ${r==="walking"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("svg",{className:"w-6 h-6 mx-auto mb-1 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{className:"font-medium text-sm",children:"Walking Customer"})]})]}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"billingType",value:"member",checked:r==="member",onChange:t=>Z(t.target.value),className:"sr-only"}),e.jsxs("div",{className:`p-3 border rounded-lg text-center transition-colors ${r==="member"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("svg",{className:"w-6 h-6 mx-auto mb-1 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),e.jsx("span",{className:"font-medium text-sm",children:"Member Customer"})]})]})]})]}),r==="member"&&s&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 mb-2 block",children:"Selected Member"}),e.jsx("div",{className:`${s.member_type==="paid"?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"} border rounded-lg p-3`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 ${s.member_type==="paid"?"bg-green-100":"bg-gray-100"} rounded-full flex items-center justify-center`,children:e.jsx("svg",{className:`w-5 h-5 ${s.member_type==="paid"?"text-green-600":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{className:"ml-2",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 text-sm",children:[s.first_name||s.name," ",s.last_name]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.referral_code," ","â€¢ ",s.email]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Wallet Balance:"}),e.jsx("span",{className:`ml-2 text-sm font-semibold ${j>=0?s.member_type==="paid"?"text-green-600":"text-gray-600":"text-red-500"}`,children:I?e.jsxs("div",{className:"inline-flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-gray-400 mr-1"}),"Loading..."]}):b(j)})]}),!I&&e.jsx("div",{className:"flex space-x-1 ml-4",children:j>=c?e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.member_type==="paid"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:"Sufficient"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-700 rounded-full",children:"Insufficient"})})]})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{type:"button",onClick:()=>C(!0),className:"px-3 py-1 text-xs text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Change"})})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 mb-2 block",children:"Payment Method"}),e.jsxs("div",{className:"grid gap-3 grid-cols-3",children:[e.jsxs("label",{className:`cursor-pointer ${r==="member"&&s&&s.member_type==="paid"?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:n==="cash",onChange:t=>B(t.target.value),disabled:r==="member"&&s&&s.member_type==="paid",className:"sr-only"}),e.jsxs("div",{className:`p-3 border rounded-lg text-center transition-colors ${n==="cash"?"border-blue-500 bg-blue-50":r==="member"&&s&&s.member_type==="paid"?"border-gray-200 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("svg",{className:`w-6 h-6 mx-auto mb-1 ${r==="member"&&s&&s.member_type==="paid"?"text-gray-400":"text-yellow-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("span",{className:`font-medium text-sm ${r==="member"&&s&&s.member_type==="paid"?"text-gray-400":""}`,children:"Cash"})]})]}),e.jsxs("label",{className:`cursor-pointer ${r==="member"&&s&&s.member_type==="paid"?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"online",checked:n==="online",onChange:t=>B(t.target.value),disabled:r==="member"&&s&&s.member_type==="paid",className:"sr-only"}),e.jsxs("div",{className:`p-3 border rounded-lg text-center transition-colors ${n==="online"?"border-blue-500 bg-blue-50":r==="member"&&s&&s.member_type==="paid"?"border-gray-200 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("svg",{className:`w-6 h-6 mx-auto mb-1 ${r==="member"&&s&&s.member_type==="paid"?"text-gray-400":"text-green-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),e.jsx("span",{className:`font-medium text-sm ${r==="member"&&s&&s.member_type==="paid"?"text-gray-400":""}`,children:"Online"})]})]}),e.jsxs("label",{className:`cursor-pointer ${r==="walking"||r==="member"&&s&&s.member_type!=="paid"?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"wallet",checked:n==="wallet",onChange:t=>B(t.target.value),disabled:r==="walking"||r==="member"&&s&&s.member_type!=="paid",className:"sr-only"}),e.jsxs("div",{className:`p-3 border rounded-lg text-center transition-colors ${n==="wallet"?"border-blue-500 bg-blue-50":r==="walking"||r==="member"&&s&&s.member_type!=="paid"?"border-gray-200 bg-gray-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("svg",{className:`w-6 h-6 mx-auto mb-1 ${r==="walking"||r==="member"&&s&&s.member_type!=="paid"?"text-gray-400":"text-purple-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),e.jsx("span",{className:`font-medium text-sm ${r==="walking"||r==="member"&&s&&s.member_type!=="paid"?"text-gray-400":""}`,children:"Wallet"})]})]})]}),r==="member"&&s&&s.member_type==="paid"&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-4 w-4 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("div",{className:"ml-2",children:e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"For paid members, only wallet payments are available."})})]})}),r==="member"&&s&&s.member_type!=="paid"&&e.jsx("div",{className:"mt-3 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-4 w-4 text-orange-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("div",{className:"ml-2",children:e.jsx("p",{className:"text-xs text-orange-700 font-medium",children:"Wallet payments are not available for free members."})})]})})]}),r==="member"&&s&&n==="wallet"&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"space-y-3",children:[K&&e.jsxs("div",{className:`inline-flex items-center text-xs px-2 py-1 rounded ${y?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[y?e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),K]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-500 flex-shrink-0",children:[n==="wallet"?"Confirm OTP":"Enter OTP",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:k,onChange:t=>le(t.target.value),className:"input input-bordered input-sm w-24 text-center font-mono tracking-wider",placeholder:"000000",maxLength:6,pattern:"[0-9]{6}",required:!0,disabled:!y}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-2 flex items-center",children:e.jsx("svg",{className:"w-3 h-3 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),!y&&e.jsx("button",{type:"button",onClick:ee,disabled:L,className:"px-3 py-1 text-xs bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 flex-shrink-0",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-white inline mr-1"}),"Sending..."]}):"Request OTP"}),y&&e.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:V>0?e.jsxs("span",{className:"text-xs text-gray-500",children:["Resend in"," ",V,"s"]}):de?e.jsx("button",{type:"button",onClick:ee,disabled:L,className:"px-3 py-1 text-xs bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-white inline mr-1"}),"Resending..."]}):"Resend OTP"}):e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded-full",children:"âœ“ OTP Sent"})}),e.jsx("span",{className:"text-xs text-gray-500 flex-1",children:n==="wallet"?"Enter 6-digit OTP to confirm wallet payment":"Enter 6-digit OTP sent to your email"})]})]})}),n==="cash"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 mb-2 block",children:"Discount Amount"}),e.jsx("input",{type:"number",value:u,onChange:t=>z(parseFloat(t.target.value)||0),className:"input input-bordered w-full input-sm",placeholder:"Enter discount amount",min:0,max:c,step:"0.01"}),u>c&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Discount cannot exceed order total"})]}),n==="online"&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-500 mb-2 block",children:["Payment Reference"," ",e.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),e.jsx("input",{type:"text",value:T,onChange:t=>W(t.target.value),className:"input input-bordered w-full input-sm",placeholder:"Enter transaction reference number",maxLength:30})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-500 mb-2 block",children:["Notes"," ",e.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),e.jsx("textarea",{value:v,onChange:t=>ie(t.target.value),className:"textarea textarea-bordered w-full textarea-sm resize-none",placeholder:"Enter any additional notes...",rows:3,maxLength:200}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Maximum 200 characters"}),e.jsxs("span",{className:`text-xs ${v.length>180?"text-red-500":"text-gray-400"}`,children:[v.length,"/200"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-auto",children:[e.jsx("button",{type:"button",onClick:R,className:"btn btn-sm btn-ghost",disabled:S,children:"Cancel"}),e.jsx("button",{type:"submit",className:`btn btn-sm text-white ${n==="wallet"&&r==="member"&&s&&j<c||S?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,disabled:S||n==="wallet"&&r==="member"&&s&&j<c,children:S?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-xs mr-1"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Process Payment"]})})]})]})]})]}),oe&&e.jsx(ye,{onClose:()=>C(!1),onSelectMember:fe}),ce&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:e.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:(x==null?void 0:x.message)||"Your payment has been processed successfully."}),x&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 text-left",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Order ID:"}),e.jsxs("span",{className:"font-medium",children:["#",x.orderId]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Payment Method:"}),e.jsx("span",{className:"font-medium capitalize",children:x.paymentMethod})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Amount Paid:"}),e.jsx("span",{className:"font-medium text-green-600",children:b(x.finalTotal)})]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:U,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Close"}),e.jsxs("button",{onClick:pe,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print Receipt"]})]})]})})}),me&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 transform animate-pulse",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Error"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please check the details below"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-red-800 font-medium",children:xe})})]})})}),e.jsx("div",{className:"p-6 border-t border-gray-100 bg-gray-50 rounded-b-xl",children:e.jsx("button",{onClick:ue,className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"OK"})})]})}),he&&x&&e.jsx(Ne,{table:f,order:{id:x.orderId},onClose:()=>{Q(!1),U()}})]})}export{Me as default};
