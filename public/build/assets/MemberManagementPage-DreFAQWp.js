import{r,j as e}from"./app-Cy0UIO-x.js";import X from"./ViewMemberModal-COefJJtU.js";import Y from"./EditMemberModal-9JSz_v5h.js";import Z from"./ResetPasswordModal-B5IedDoL.js";function le({user:ee,members:c=[]}){const[d,N]=r.useState(c),[V,y]=r.useState(!1),[A,u]=r.useState(!1),[D,j]=r.useState(!1),[i,a]=r.useState(null),[o,C]=r.useState(""),[g,M]=r.useState(""),[p,S]=r.useState(""),[h,m]=r.useState(c),[l,x]=r.useState(1),[f]=r.useState(10);r.useEffect(()=>{N(c),m(c)},[c]);const I=()=>{const s=d.filter(t=>{var L,P,E,R,F;const w=!o||((L=t.name)==null?void 0:L.toLowerCase().includes(o.toLowerCase()))||((P=t.first_name)==null?void 0:P.toLowerCase().includes(o.toLowerCase()))||((E=t.last_name)==null?void 0:E.toLowerCase().includes(o.toLowerCase())),n=!g||((R=t.email)==null?void 0:R.toLowerCase().includes(g.toLowerCase())),Q=!p||((F=t.referral_code)==null?void 0:F.toLowerCase().includes(p.toLowerCase()));return w&&n&&Q&&t.deleteStatus===0&&t.user_type==="member"});m(s),x(1)},z=()=>{C(""),M(""),S(""),m(d.filter(s=>s.deleteStatus===0&&s.user_type==="member")),x(1)},B=s=>{N(t=>t.map(n=>n.id===s.id?s:n)),m(t=>t.map(n=>n.id===s.id?s:n)),u(!1),a(null)},T=()=>{j(!1),a(null)},W=s=>{a(s),y(!0)},$=s=>{a(s),u(!0)},O=s=>{a(s),j(!0)},U=s=>{const t=btoa(s.id.toString());window.location.href=`/member-transactions/${t}`},G=s=>({paid_member:"Paid Member",free_member:"Free Member"})[s]||s,H=s=>s.roles&&s.roles.length>0?s.roles[0].name:"No Role",v=l*f,k=v-f,_=h.slice(k,v),b=Math.ceil(h.length/f),q=s=>{x(s)},J=()=>{l>1&&x(l-1)},K=()=>{l<b&&x(l+1)};return e.jsx("div",{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Total Members"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(s=>s.deleteStatus===0&&s.user_type==="member").length})]}),e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Active Members"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(s=>s.activeStatus===1&&s.deleteStatus===0&&s.user_type==="member").length})]}),e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Paid Members"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(s=>s.member_type==="paid_member"&&s.deleteStatus===0&&s.user_type==="member").length})]}),e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Free Members"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.filter(s=>s.member_type==="free_member"&&s.deleteStatus===0&&s.user_type==="member").length})]}),e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Search by Name"})}),e.jsx("input",{type:"text",value:o,onChange:s=>C(s.target.value),className:"input input-bordered w-full",placeholder:"Enter name..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Search by Email"})}),e.jsx("input",{type:"text",value:g,onChange:s=>M(s.target.value),className:"input input-bordered w-full",placeholder:"Enter email..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Search by Referral Code"})}),e.jsx("input",{type:"text",value:p,onChange:s=>S(s.target.value),className:"input input-bordered w-full",placeholder:"Enter referral code..."})]}),e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx("button",{onClick:I,className:"btn bg-amber-800 hover:bg-amber-900 text-white border-amber-800 hover:border-amber-900",children:"Filter"}),e.jsx("button",{onClick:z,className:"btn btn-outline border-amber-800 text-amber-800 hover:bg-amber-800 hover:text-white",children:"Reset"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Members (",h.length,")"]})}),e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Gender"}),e.jsx("th",{children:"Country"}),e.jsx("th",{children:"Referral Code"}),e.jsx("th",{children:"Member Type"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:_.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"text-center py-8 text-gray-500",children:"No members found"})}):_.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsxs("div",{className:"font-bold",children:[s.first_name," ",s.last_name]}),e.jsx("div",{className:"text-sm text-gray-500",children:s.name})]}),e.jsx("td",{children:e.jsx("span",{className:"font-medium",children:s.email})}),e.jsx("td",{children:e.jsx("span",{className:"font-medium",children:s.gender?s.gender.charAt(0).toUpperCase()+s.gender.slice(1):"N/A"})}),e.jsx("td",{children:e.jsx("span",{className:"font-medium",children:s.country||"N/A"})}),e.jsx("td",{children:e.jsx("span",{className:"font-medium",children:s.referral_code||"N/A"})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.member_type==="paid_member"?"badge-primary":"badge-secondary"}`,children:G(s.member_type)})}),e.jsx("td",{children:e.jsx("span",{className:"font-medium",children:H(s)})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.activeStatus===1?"badge-success":"badge-warning"}`,children:s.activeStatus===1?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx("button",{onClick:()=>W(s),className:"btn btn-ghost btn-xs text-amber-700 hover:bg-amber-50",children:"View"}),e.jsx("button",{onClick:()=>$(s),className:"btn btn-ghost btn-xs text-amber-700 hover:bg-amber-50",children:"Edit"}),e.jsx("button",{onClick:()=>O(s),className:"btn btn-ghost btn-xs text-amber-700 hover:bg-amber-50",children:"Reset Password"}),e.jsx("button",{onClick:()=>U(s),className:"btn btn-ghost btn-xs text-blue-700 hover:bg-blue-50",children:"View Transactions"})]})})]},s.id))})]})}),b>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",k+1," to"," ",Math.min(v,h.length)," ","of ",h.length," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:J,disabled:l===1,className:"btn btn-sm btn-outline border-amber-800 text-amber-800 hover:bg-amber-800 hover:text-white disabled:opacity-50",children:"Previous"}),Array.from({length:b},(s,t)=>t+1).map(s=>e.jsx("button",{onClick:()=>q(s),className:`btn btn-sm ${l===s?"bg-amber-800 hover:bg-amber-900 text-white border-amber-800 hover:border-amber-900":"btn-outline border-amber-800 text-amber-800 hover:bg-amber-800 hover:text-white"}`,children:s},s)),e.jsx("button",{onClick:K,disabled:l===b,className:"btn btn-sm btn-outline border-amber-800 text-amber-800 hover:bg-amber-800 hover:text-white disabled:opacity-50",children:"Next"})]})]})]})]}),V&&i&&e.jsx(X,{member:i,onClose:()=>{y(!1),a(null)}}),A&&i&&e.jsx(Y,{member:i,onClose:()=>{u(!1),a(null)},onSuccess:B}),D&&i&&e.jsx(Z,{member:i,onClose:()=>{j(!1),a(null)},onSuccess:T})]})})}export{le as default};
