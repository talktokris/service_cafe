import{r as s,u as B,j as e,H as F}from"./app-Cy0UIO-x.js";import H from"./MemberDashboardLayout-CLtaa2FF.js";import{P as w}from"./PrimaryButton-DE4opROf.js";import I from"./WithdrawComponent-BmbW7WvJ.js";import A from"./Breadcrumb-65Ji4OXl.js";import"./MemberHeader-DKisl_KS.js";import"./MemberSidebar-BUy_vDtK.js";import"./PaidMemberSidebar-BPwsytp-.js";import"./FreeMemberSidebar-DrtQJGoa.js";import"./MemberFooter-XlrQ4yVu.js";import"./TextInput-BJH9GNUA.js";import"./InputLabel-CYYTd4Xb.js";function ee({auth:k,earnings:i=[],summary:d={},min_withdrawal_amount:R=1e3}){const[_,c]=s.useState(!1),[m,x]=s.useState(""),[h,u]=s.useState(""),[p,C]=s.useState(""),[g,j]=s.useState(!1),[o,f]=s.useState(i),[r,y]=s.useState(d),{get:V,data:$,setData:b}=B({from_date:"",to_date:"",type:""});s.useEffect(()=>{const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),1),v=new Date(t.getFullYear(),t.getMonth()+1,0),l=M=>M.toISOString().split("T")[0];x(l(n)),u(l(v)),b("from_date",l(n)),b("to_date",l(v))},[]),s.useEffect(()=>{f(i),y(d)},[i,d]);const a=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t),S=t=>new Date(t).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),T=t=>{switch(t){case 1:return"Earning";case 2:return"Withdrawal";case 3:return"Redistribution";default:return"Unknown"}},D=t=>{switch(t){case 1:return"bg-green-100 text-green-800";case 2:return"bg-red-100 text-red-800";case 3:return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},E=t=>t===1?"Debit":"Credit",N=t=>t===1?"text-red-600":"text-green-600",L=async()=>{j(!0);try{const t=await fetch(route("api.member.earnings")+`?from_date=${m}&to_date=${h}&type=${p}`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(t.ok){const n=await t.json();f(n.earnings),y(n.summary)}else console.error("Failed to fetch earnings data")}catch(t){console.error("Error fetching earnings data:",t)}finally{j(!1)}},W=()=>{window.location.reload()};return e.jsxs(H,{title:"Earnings - Serve Cafe",user:k.user,memberType:"paid",children:[e.jsx(F,{title:"Earnings"}),e.jsxs("div",{children:[e.jsx(A,{title:"Earnings",links:["Home","Earnings"],icon:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"p-3 sm:p-4 lg:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-600",children:"Total Earnings"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-green-900",children:a(r.total_earnings||0)})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["This month:"," ",a(r.month_earnings||0)]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-600",children:"Total Withdrawals"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-red-900",children:a(r.total_withdrawals||0)})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["This month:"," ",a(r.month_withdrawals||0)]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-600",children:"Total Redistributions"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-900",children:a(r.total_redistributions||0)})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["This month:"," ",a(r.month_redistributions||0)]})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-purple-600",children:"Earning Balance"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-purple-900",children:a(r.earning_balance||0)})]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Available for withdrawal"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Search Earnings"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:m,onChange:t=>x(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:h,onChange:t=>u(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Type"}),e.jsxs("select",{value:p,onChange:t=>C(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"1",children:"Earning"}),e.jsx("option",{value:"2",children:"Withdrawal"}),e.jsx("option",{value:"3",children:"Redistribution"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(w,{onClick:L,disabled:g,className:"w-full",children:g?"Searching...":"Search"})})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(w,{onClick:()=>c(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:"Create Withdrawal"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Earnings History (",o.length," ","records)"]}),o.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No earnings found for the selected period."})]})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Debit/Credit"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S(t.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D(t.transation_type)}`,children:T(t.transation_type)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.earning_name||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:t.earning_description||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`text-sm font-medium ${N(t.debit_credit)}`,children:E(t.debit_credit)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("span",{className:N(t.debit_credit),children:[t.debit_credit===1?"-":"+",a(t.ammout)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.status===1?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.status===1?"Active":"Inactive"})})]},t.id))})]})})]})})]})]}),e.jsx(I,{isOpen:_,onClose:()=>c(!1),currentBalance:r.earning_balance||0,minWithdrawalAmount:1e3,onWithdrawSuccess:W})]})}export{ee as default};
