import{r as h,j as e,b as v}from"./app-BF4HM74z.js";function k({onClose:x,onSuccess:p,officeProfiles:u=[]}){const[a,f]=h.useState({headOfficeId:"",branchId:"",itemName:"",itemType:"food",activeStatus:1}),[c,n]=h.useState({}),[d,o]=h.useState(!1),j=u.filter(t=>t.profileType==="HeadOffice"&&t.deleteStatus===0),g=u.filter(t=>t.profileType==="BranchOffice"&&t.deleteStatus===0),l=t=>{const{name:s,value:i,type:r,checked:y}=t.target;f(m=>({...m,[s]:r==="checkbox"?y:i})),c[s]&&n(m=>({...m,[s]:null}))},b=()=>{const t={};return a.headOfficeId||(t.headOfficeId="Head Office is required"),a.itemName||(t.itemName="Item name is required"),a.itemType||(t.itemType="Item type is required"),n(t),Object.keys(t).length===0},N=async t=>{if(t.preventDefault(),!!b()){o(!0);try{v.post("/stock-item-settings",a,{onSuccess:s=>{var i;if((i=s.props.flash)!=null&&i.success&&console.log("Success message:",s.props.flash.success),console.log("Page props received:",s.props),s.props.stockItemSetting)console.log("Using stockItemSetting from page props:",s.props.stockItemSetting),p(s.props.stockItemSetting);else{const r={id:Date.now(),...a,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Using mock stock item:",r),p(r)}},onError:s=>{n(s)},onFinish:()=>{o(!1)}})}catch(s){console.error("Error creating stock item setting:",s),o(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Stock Item Setting"}),e.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Office Selection"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Head Office *"})}),e.jsxs("select",{name:"headOfficeId",value:a.headOfficeId,onChange:l,className:`select select-bordered w-full ${c.headOfficeId?"select-error":""}`,children:[e.jsx("option",{value:"",children:"Select Head Office"}),j.map(t=>e.jsx("option",{value:t.id,children:t.companyName},t.id))]}),c.headOfficeId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.headOfficeId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Branch Office"})}),e.jsxs("select",{name:"branchId",value:a.branchId,onChange:l,className:"select select-bordered w-full",children:[e.jsx("option",{value:"",children:"Select Branch Office (Optional)"}),g.map(t=>e.jsx("option",{value:t.id,children:t.companyName},t.id))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Item Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Item Name *"})}),e.jsx("input",{type:"text",name:"itemName",value:a.itemName,onChange:l,className:`input input-bordered w-full ${c.itemName?"input-error":""}`,placeholder:"e.g., Rice, Coffee, Sugar"}),c.itemName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.itemName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Item Type *"})}),e.jsxs("select",{name:"itemType",value:a.itemType,onChange:l,className:`select select-bordered w-full ${c.itemType?"select-error":""}`,children:[e.jsx("option",{value:"food",children:"Food"}),e.jsx("option",{value:"drink",children:"Drink"})]}),c.itemType&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.itemType})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Status"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"activeStatus",checked:a.activeStatus===1,onChange:t=>f(s=>({...s,activeStatus:t.target.checked?1:0})),className:"checkbox checkbox-primary mr-3"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active Status"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:x,className:"btn btn-ghost",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Creating..."]}):"Create Stock Item"})]})]})]})})}export{k as default};
