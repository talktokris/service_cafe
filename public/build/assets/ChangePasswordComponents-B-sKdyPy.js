import{r as m,j as s,b as j}from"./app-ey5GbxPF.js";function N({user:t,onClose:p,onSuccess:x}){const[n,h]=m.useState({new_password:"",new_password_confirmation:""}),[r,o]=m.useState({}),[i,d]=m.useState(!1),w=a=>{const{name:e,value:l}=a.target;h(c=>({...c,[e]:l})),r[e]&&o(c=>({...c,[e]:null}))},u=()=>{const a={};return n.new_password?n.new_password.length<8&&(a.new_password="New password must be at least 8 characters"):a.new_password="New password is required",n.new_password!==n.new_password_confirmation&&(a.new_password_confirmation="New passwords do not match"),o(a),Object.keys(a).length===0},f=async a=>{if(a.preventDefault(),!!u()){d(!0);try{j.post(`/users/${t.id}/reset-password`,n,{onSuccess:e=>{var l;(l=e.props.flash)!=null&&l.success&&console.log("Success message:",e.props.flash.success),x()},onError:e=>{o(e)},onFinish:()=>{d(!1)}})}catch(e){console.error("Error resetting password:",e),d(!1)}}};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Reset Password"}),s.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"User Information:"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Name:"}),s.jsxs("span",{className:"font-medium",children:[t.first_name," ",t.last_name]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Email:"}),s.jsx("span",{className:"font-medium",children:t.email})]})]})]}),s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"label",children:s.jsx("span",{className:"label-text",children:"New Password *"})}),s.jsx("input",{type:"password",name:"new_password",value:n.new_password,onChange:w,className:`input input-bordered w-full ${r.new_password?"input-error":""}`,placeholder:"Enter new password"}),r.new_password&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.new_password})]}),s.jsxs("div",{children:[s.jsx("label",{className:"label",children:s.jsx("span",{className:"label-text",children:"Confirm New Password *"})}),s.jsx("input",{type:"password",name:"new_password_confirmation",value:n.new_password_confirmation,onChange:w,className:`input input-bordered w-full ${r.new_password_confirmation?"input-error":""}`,placeholder:"Confirm new password"}),r.new_password_confirmation&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.new_password_confirmation})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[s.jsx("h5",{className:"text-sm font-medium text-blue-900 mb-2",children:"Password Requirements:"}),s.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[s.jsx("li",{children:"• At least 8 characters long"}),s.jsx("li",{children:"• New password and confirmation must match"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:p,className:"btn btn-ghost",disabled:i,children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Resetting..."]}):"Reset Password"})]})]})]})]})}):null}export{N as default};
