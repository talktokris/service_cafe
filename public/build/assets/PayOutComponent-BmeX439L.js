import{r as m,u as D,j as e}from"./app-CeALoAiy.js";import{P as L}from"./PrimaryButton-Bwf_KZ33.js";import{T as I}from"./TextInput-DO5sVl_O.js";import{I as v}from"./InputLabel-toewdHjt.js";function T({isOpen:u,onClose:l,transaction:s,onPayoutSuccess:a}){var b;const[x,g]=m.useState(!1),[p,i]=m.useState(""),[t,j]=m.useState(""),{data:d,setData:h,post:y,processing:f,errors:n,reset:o}=D({transaction_id:(s==null?void 0:s.id)||"",cash_out_reference_no:"",cash_out_description:""});m.useEffect(()=>{u?s&&h("transaction_id",s.id):(o(),i(""),j(""))},[u,s,o]);const N=r=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r),w=r=>new Date(r).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=r=>{if(r.preventDefault(),i(""),!d.cash_out_reference_no.trim()){i("Reference number is required.");return}if(!d.cash_out_description.trim()){i("Description is required.");return}g(!0),y(route("cash.out.payout"),{onSuccess:c=>{var _;(_=c.props.flash)!=null&&_.success?(i(""),j(c.props.flash.success),setTimeout(()=>{a==null||a(),l(),o()},3e3)):(a==null||a(),l(),o())},onError:c=>{i(c.message||"An error occurred while processing the payout.")},onFinish:()=>{g(!1)}})};return!u||!s?null:e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Process Cash Out Payout"}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Transaction Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Transaction ID:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:s.id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"User:"}),e.jsxs("span",{className:"ml-2 text-gray-900",children:[((b=s.user)==null?void 0:b.name)||"N/A"," (ID:"," ",s.user_id,")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Amount:"}),e.jsx("span",{className:"ml-2 text-gray-900 font-semibold",children:N(s.amount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Request Date:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:w(s.transaction_date)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${s.cash_out_status===1?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.cash_out_status===1?"Paid":"Pending"})]})]})]}),t&&e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("div",{className:"text-sm font-medium text-green-800",children:t})]})}),p&&!t&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("div",{className:"text-sm font-medium text-red-800",children:p})]})}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"cash_out_reference_no",value:"Reference Number *"}),e.jsx(I,{id:"cash_out_reference_no",type:"text",className:"mt-1 block w-full",placeholder:"Enter payment reference number",value:d.cash_out_reference_no,onChange:r=>h("cash_out_reference_no",r.target.value),disabled:!!t,required:!0}),n.cash_out_reference_no&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:n.cash_out_reference_no})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"cash_out_description",value:"Payment Description *"}),e.jsx("textarea",{id:"cash_out_description",rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 text-sm",placeholder:"Enter payment description or notes",value:d.cash_out_description,onChange:r=>h("cash_out_description",r.target.value),disabled:!!t,required:!0}),n.cash_out_description&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:n.cash_out_description})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",disabled:f||x||t,children:"Cancel"}),e.jsx(L,{type:"submit",disabled:f||x||t,className:"px-4 py-2",children:f||x?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):"Make Payment"})]})]})]})})})}export{T as default};
