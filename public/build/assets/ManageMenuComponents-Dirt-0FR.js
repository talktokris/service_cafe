import{r as l,j as e}from"./app-ey5GbxPF.js";import G from"./CreateMenuComponents-BaRcDTgT.js";import P from"./ViewMenuComponents-D5ilQ_zx.js";import R from"./EditMenuComponents-BfXVxztR.js";import U from"./DeleteMenuComponents-BuMCQEwO.js";function Y({user:$,menuItems:h=[],officeProfiles:d=[]}){const[n,i]=l.useState(h),[M,x]=l.useState(!1),[C,N]=l.useState(!1),[k,m]=l.useState(!1),[S,u]=l.useState(!1),[c,a]=l.useState(null),[b,T]=l.useState(""),[j,I]=l.useState("all"),[g,O]=l.useState("all"),[f,L]=l.useState("all");l.useEffect(()=>{i(h)},[h]);const A=d.filter(s=>s.profileType==="HeadOffice"&&s.deleteStatus===0),B=d.filter(s=>s.profileType==="BranchOffice"&&s.deleteStatus===0),p=n.filter(s=>{var y;const t=(y=s.menuName)==null?void 0:y.toLowerCase().includes(b.toLowerCase()),r=j==="all"||s.headOfficeId==j,v=g==="all"||s.branchId==g,z=f==="all"||s.menuType===f;return t&&r&&v&&z&&s.deleteStatus===0}),E=s=>{console.log("New menu item received in handleCreateMenuItem:",s),console.log("Current menus before update:",n),i(t=>{const r=[...t,s];return console.log("Updated menus:",r),r}),x(!1)},H=s=>{i(n.map(t=>t.id===s.id?s:t)),m(!1),a(null)},D=s=>{i(n.map(t=>t.id===s?{...t,deleteStatus:1}:t)),u(!1),a(null)},V=s=>{a(s),N(!0)},F=s=>{a(s),m(!0)},W=s=>{a(s),u(!0)},w=(s,t)=>{if(!s)return"N/A";const r=d.find(v=>v.id==s);return r?r.companyName:"Unknown"},o=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s||0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Menu Items Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage menu items for head offices and branch offices"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"btn bg-red-600 hover:bg-red-700 text-white",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Menu Item"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Menu Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.filter(s=>s.deleteStatus===0).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Food Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.filter(s=>s.menuType==="food"&&s.deleteStatus===0).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Drink Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.filter(s=>s.menuType==="drink"&&s.deleteStatus===0).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Items"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.filter(s=>s.activeStatus===1&&s.deleteStatus===0).length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"text",placeholder:"Search menu items...",value:b,onChange:s=>T(s.target.value),className:"input input-bordered w-full"})}),e.jsx("div",{children:e.jsxs("select",{value:j,onChange:s=>I(s.target.value),className:"select select-bordered w-full",children:[e.jsx("option",{value:"all",children:"All Head Offices"}),A.map(s=>e.jsx("option",{value:s.id,children:s.companyName},s.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:g,onChange:s=>O(s.target.value),className:"select select-bordered w-full",children:[e.jsx("option",{value:"all",children:"All Branch Offices"}),B.map(s=>e.jsx("option",{value:s.id,children:s.companyName},s.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:f,onChange:s=>L(s.target.value),className:"select select-bordered w-full",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"food",children:"Food"}),e.jsx("option",{value:"drink",children:"Drink"})]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Menu Items (",p.length,")"]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Menu Name"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Head Office"}),e.jsx("th",{children:"Branch Office"}),e.jsx("th",{children:"Buying Price"}),e.jsx("th",{children:"Selling Price"}),e.jsx("th",{children:"Gov Tax %"}),e.jsx("th",{children:"Gov Tax Amount"}),e.jsx("th",{children:"Price with Tax"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"11",className:"text-center py-8 text-gray-500",children:"No menu items found"})}):p.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{className:"font-bold",children:s.menuName||"N/A"})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.menuType==="food"?"badge-primary":"badge-secondary"}`,children:s.menuType})}),e.jsx("td",{children:w(s.headOfficeId)}),e.jsx("td",{children:w(s.branchId)}),e.jsx("td",{children:e.jsx("span",{className:"font-medium text-green-600",children:o(s.buyingPrice)})}),e.jsx("td",{children:e.jsx("span",{className:"font-medium text-blue-600",children:o(s.sellingPrice)})}),e.jsx("td",{children:e.jsxs("span",{className:"font-medium text-orange-600",children:[s.govTaxPercentage||0,"%"]})}),e.jsx("td",{children:e.jsx("span",{className:"font-medium text-purple-600",children:o(s.govTaxAmount)})}),e.jsx("td",{children:e.jsx("span",{className:"font-medium text-green-600",children:o(s.sellingWithTaxPrice)})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.activeStatus===1?"badge-success":"badge-warning"}`,children:s.activeStatus===1?"Active":"Inactive"})}),e.jsx("td",{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>V(s),className:"btn btn-ghost btn-xs text-green-600 hover:bg-green-50",children:"View"}),e.jsx("button",{onClick:()=>F(s),className:"btn btn-ghost btn-xs text-blue-600 hover:bg-blue-50",children:"Edit"}),e.jsx("button",{onClick:()=>W(s),className:"btn btn-ghost btn-xs text-red-600 hover:bg-red-50",children:"Delete"})]})})]},s.id))})]})})})]}),M&&e.jsx(G,{onClose:()=>x(!1),onSuccess:E,officeProfiles:d}),C&&c&&e.jsx(P,{menuItem:c,onClose:()=>{N(!1),a(null)},officeProfiles:d}),k&&c&&e.jsx(R,{menuItem:c,onClose:()=>{m(!1),a(null)},onSuccess:H,officeProfiles:d}),S&&c&&e.jsx(U,{menuItem:c,onClose:()=>{u(!1),a(null)},onSuccess:D})]})}export{Y as default};
