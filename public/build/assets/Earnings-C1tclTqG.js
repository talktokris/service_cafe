import{r as s,u as M,j as e,H as B}from"./app-GQ-hLdfW.js";import F from"./MemberDashboardLayout-0bQyLSDb.js";import{P as v}from"./PrimaryButton-DDLwr1AA.js";import H from"./WithdrawComponent-D2I7aOKJ.js";import I from"./Breadcrumb-k14WW90x.js";import"./MemberHeader-CeYgeBy7.js";import"./MemberSidebar-BqY_dCUI.js";import"./PaidMemberSidebar-DDEQodzl.js";import"./FreeMemberSidebar-BxCXBBEn.js";import"./MemberFooter-C2-l5f0S.js";import"./TextInput-B-gj2a4q.js";import"./InputLabel-CigIhyQ-.js";function Z({auth:k,earnings:i=[],summary:d={},min_withdrawal_amount:A=1e3}){const[_,o]=s.useState(!1),[m,x]=s.useState(""),[h,p]=s.useState(""),[u,S]=s.useState(""),[g,w]=s.useState(!1),[c,f]=s.useState(i),[r,j]=s.useState(d),{get:R,data:V,setData:y}=M({from_date:"",to_date:"",type:""});s.useEffect(()=>{const t=new Date,l=new Date(t.getFullYear(),t.getMonth(),1),N=new Date(t.getFullYear(),t.getMonth()+1,0),n=W=>W.toISOString().split("T")[0];x(n(l)),p(n(N)),y("from_date",n(l)),y("to_date",n(N))},[]),s.useEffect(()=>{f(i),j(d)},[i,d]);const a=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t),C=t=>new Date(t).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),T=t=>{switch(t){case 1:return"Earning";case 2:return"Withdrawal";case 3:return"Redistribution";default:return"Unknown"}},D=t=>{switch(t){case 1:return"bg-green-100 text-green-800";case 2:return"bg-red-100 text-red-800";case 3:return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},b=t=>t===1?"text-red-600":"text-green-600",E=async()=>{w(!0);try{const t=await fetch(route("api.member.earnings")+`?from_date=${m}&to_date=${h}&type=${u}`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(t.ok){const l=await t.json();f(l.earnings),j(l.summary)}else console.error("Failed to fetch earnings data")}catch(t){console.error("Error fetching earnings data:",t)}finally{w(!1)}},L=()=>{window.location.reload()};return e.jsxs(F,{title:"Earnings - Serve Cafe",user:k.user,memberType:"paid",children:[e.jsx(B,{title:"Earnings"}),e.jsxs("div",{children:[e.jsx(I,{title:"Earnings",links:["Home","Earnings"],icon:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"px-3 sm:px-4 lg:px-6 py-4 sm:py-6 space-y-4 sm:space-y-6 w-[100vw] overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6 w-full",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4 lg:p-6 min-w-0",children:[e.jsxs("div",{className:"flex items-center min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"ml-2 sm:ml-3 lg:ml-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-600 truncate",children:"Total Earnings"}),e.jsx("p",{className:"text-sm sm:text-lg lg:text-xl xl:text-2xl font-bold text-green-900 truncate",children:a(r.total_earnings||0)})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 truncate",children:["This month:"," ",a(r.month_earnings||0)]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4 lg:p-6 min-w-0",children:[e.jsxs("div",{className:"flex items-center min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-2 sm:ml-3 lg:ml-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-600 truncate",children:"Total Withdrawals"}),e.jsx("p",{className:"text-sm sm:text-lg lg:text-xl xl:text-2xl font-bold text-red-900 truncate",children:a(r.total_withdrawals||0)})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 truncate",children:["This month:"," ",a(r.month_withdrawals||0)]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4 lg:p-6 min-w-0",children:[e.jsxs("div",{className:"flex items-center min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("div",{className:"ml-2 sm:ml-3 lg:ml-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-600 truncate",children:"Total Redistributions"}),e.jsx("p",{className:"text-sm sm:text-lg lg:text-xl xl:text-2xl font-bold text-blue-900 truncate",children:a(r.total_redistributions||0)})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 truncate",children:["This month:"," ",a(r.month_redistributions||0)]})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 sm:p-4 lg:p-6 min-w-0",children:[e.jsxs("div",{className:"flex items-center min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsxs("div",{className:"ml-2 sm:ml-3 lg:ml-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-purple-600 truncate",children:"Earning Balance"}),e.jsx("p",{className:"text-sm sm:text-lg lg:text-xl xl:text-2xl font-bold text-purple-900 truncate",children:a(r.earning_balance||0)})]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 truncate",children:"Available for withdrawal"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4 lg:p-6 max-w-full overflow-hidden",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Search Earnings"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 w-full",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:m,onChange:t=>x(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:h,onChange:t=>p(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Type"}),e.jsxs("select",{value:u,onChange:t=>S(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"1",children:"Earning"}),e.jsx("option",{value:"2",children:"Withdrawal"}),e.jsx("option",{value:"3",children:"Redistribution"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(v,{onClick:E,disabled:g,className:"w-full",children:g?"Searching...":"Search"})})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(v,{onClick:()=>o(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:"Create Withdrawal"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Earnings History (",c.length," ","records)"]}),c.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No earnings found for the selected period."})]})}):e.jsx("div",{className:"w-full max-w-full overflow-hidden",children:e.jsxs("div",{className:"overflow-hidden rounded-lg border border-gray-200 w-full",children:[e.jsx("div",{className:"overflow-x-auto max-h-96 overflow-y-auto w-full",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200",style:{minWidth:"600px"},children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 sm:px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap w-20 sm:w-24",children:"Date"}),e.jsx("th",{className:"px-2 sm:px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap w-16 sm:w-20",children:"Type"}),e.jsx("th",{className:"px-2 sm:px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap hidden sm:table-cell w-24 sm:w-28",children:"Name"}),e.jsx("th",{className:"px-2 sm:px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap hidden lg:table-cell w-32",children:"Description"}),e.jsx("th",{className:"px-2 sm:px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap w-12",children:"D/C"}),e.jsx("th",{className:"px-2 sm:px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap w-20 sm:w-24",children:"Amount"}),e.jsx("th",{className:"px-2 sm:px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap w-16 sm:w-20",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-2 sm:px-3 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-900 w-20 sm:w-24",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium truncate",children:C(t.created_at)}),e.jsx("span",{className:"text-xs text-gray-500 sm:hidden truncate",children:t.earning_name||"-"})]})}),e.jsx("td",{className:"px-2 sm:px-3 py-3 whitespace-nowrap w-16 sm:w-20",children:e.jsx("span",{className:`inline-flex px-1 sm:px-2 py-1 text-xs font-semibold rounded-full ${D(t.transation_type)}`,children:T(t.transation_type)})}),e.jsx("td",{className:"px-2 sm:px-3 py-3 whitespace-nowrap text-xs sm:text-sm text-gray-900 hidden sm:table-cell w-24 sm:w-28",children:e.jsx("div",{className:"truncate",children:t.earning_name||"-"})}),e.jsx("td",{className:"px-2 sm:px-3 py-3 text-xs sm:text-sm text-gray-900 hidden lg:table-cell w-32",children:e.jsx("div",{className:"truncate",children:t.earning_description||"-"})}),e.jsx("td",{className:"px-2 sm:px-3 py-3 whitespace-nowrap text-center w-12",children:e.jsx("span",{className:`text-xs sm:text-sm font-medium ${b(t.debit_credit)}`,children:t.debit_credit===1?"D":"C"})}),e.jsx("td",{className:"px-2 sm:px-3 py-3 whitespace-nowrap text-xs sm:text-sm font-medium w-20 sm:w-24",children:e.jsxs("span",{className:b(t.debit_credit),children:[t.debit_credit===1?"-":"+",a(t.ammout)]})}),e.jsx("td",{className:"px-2 sm:px-3 py-3 whitespace-nowrap text-center w-16 sm:w-20",children:e.jsx("span",{className:`inline-flex px-1 sm:px-2 py-1 text-xs font-semibold rounded-full ${t.status===1?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.status===1?"✓":"✗"})})]},t.id))})]})}),e.jsx("div",{className:"sm:hidden px-4 py-2 bg-gray-50 border-t border-gray-200 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"← Swipe to see more columns →"})})]})})]})})]})]}),e.jsx(H,{isOpen:_,onClose:()=>o(!1),currentBalance:r.earning_balance||0,minWithdrawalAmount:1e3,onWithdrawSuccess:L})]})}export{Z as default};
