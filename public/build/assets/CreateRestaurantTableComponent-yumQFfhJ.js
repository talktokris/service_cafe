import{r as m,j as e,b as v}from"./app-BF4HM74z.js";function O({onClose:b,onSuccess:u,officeProfiles:x=[]}){const[s,p]=m.useState({headOfficeId:"",branchId:"",tableShortName:"",tableShortFullName:"",activeStatus:1}),[l,i]=m.useState({}),[o,d]=m.useState(!1),f=x.filter(a=>a.profileType==="HeadOffice"&&a.deleteStatus===0),N=x.filter(a=>a.profileType==="BranchOffice"&&a.deleteStatus===0),r=a=>{const{name:t,value:n,type:c,checked:S}=a.target;p(h=>({...h,[t]:c==="checkbox"?S:n})),l[t]&&i(h=>({...h,[t]:null}))},j=()=>{const a={};return s.headOfficeId||(a.headOfficeId="Head Office is required"),s.tableShortName?s.tableShortName.length>20&&(a.tableShortName="Table short name must be 20 characters or less"):a.tableShortName="Table short name is required",s.tableShortFullName?s.tableShortFullName.length>150&&(a.tableShortFullName="Table full name must be 150 characters or less"):a.tableShortFullName="Table full name is required",i(a),Object.keys(a).length===0},g=async a=>{if(a.preventDefault(),!!j()){d(!0);try{v.post("/restaurant-tables",s,{onSuccess:t=>{var n;if((n=t.props.flash)!=null&&n.success&&console.log("Success message:",t.props.flash.success),console.log("Page props received:",t.props),t.props.restaurantTable)console.log("Using restaurantTable from page props:",t.props.restaurantTable),u(t.props.restaurantTable);else{const c={id:Date.now(),...s,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Using mock table:",c),u(c)}},onError:t=>{i(t)},onFinish:()=>{d(!1)}})}catch(t){console.error("Error creating restaurant table:",t),d(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Restaurant Table"}),e.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Office Selection"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Head Office *"})}),e.jsxs("select",{name:"headOfficeId",value:s.headOfficeId,onChange:r,className:`select select-bordered w-full ${l.headOfficeId?"select-error":""}`,children:[e.jsx("option",{value:"",children:"Select Head Office"}),f.map(a=>e.jsx("option",{value:a.id,children:a.companyName},a.id))]}),l.headOfficeId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.headOfficeId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Branch Office"})}),e.jsxs("select",{name:"branchId",value:s.branchId,onChange:r,className:"select select-bordered w-full",children:[e.jsx("option",{value:"",children:"Select Branch Office (Optional)"}),N.map(a=>e.jsx("option",{value:a.id,children:a.companyName},a.id))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Table Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Table Short Name *"})}),e.jsx("input",{type:"text",name:"tableShortName",value:s.tableShortName,onChange:r,className:`input input-bordered w-full ${l.tableShortName?"input-error":""}`,placeholder:"e.g., T1, T2, VIP1",maxLength:"20"}),l.tableShortName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.tableShortName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Table Full Name *"})}),e.jsx("input",{type:"text",name:"tableShortFullName",value:s.tableShortFullName,onChange:r,className:`input input-bordered w-full ${l.tableShortFullName?"input-error":""}`,placeholder:"e.g., Table 1, Table 2, VIP Table 1",maxLength:"150"}),l.tableShortFullName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.tableShortFullName})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Status"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"activeStatus",checked:s.activeStatus===1,onChange:a=>p(t=>({...t,activeStatus:a.target.checked?1:0})),className:"checkbox checkbox-primary mr-3"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active Status"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:b,className:"btn btn-ghost",disabled:o,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Creating..."]}):"Create Table"})]})]})]})})}export{O as default};
