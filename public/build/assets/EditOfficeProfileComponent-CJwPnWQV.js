import{r as o,j as e,b as j}from"./app-Cy0UIO-x.js";function v({profile:s,onClose:h,onSuccess:N}){const[t,i]=o.useState({companyName:"",profileType:"BranchOffice",regNo:"",address:"",phoneNo:"",contactFirstName:"",contactLastName:"",contactEmail:"",contactMobileNo:"",activeStatus:1}),[a,m]=o.useState({}),[d,x]=o.useState(!1);o.useEffect(()=>{s&&i({companyName:s.companyName||"",profileType:s.profileType||"BranchOffice",regNo:s.regNo||"",address:s.address||"",phoneNo:s.phoneNo||"",contactFirstName:s.contactFirstName||"",contactLastName:s.contactLastName||"",contactEmail:s.contactEmail||"",contactMobileNo:s.contactMobileNo||"",activeStatus:s.activeStatus||0})},[s]);const r=n=>{const{name:c,value:l,type:u,checked:g}=n.target;i(p=>({...p,[c]:u==="checkbox"?g:l})),a[c]&&m(p=>({...p,[c]:null}))},b=()=>{const n={};return t.companyName.trim()||(n.companyName="Company name is required"),t.contactFirstName.trim()||(n.contactFirstName="Contact first name is required"),t.contactLastName.trim()||(n.contactLastName="Contact last name is required"),t.contactEmail&&!/\S+@\S+\.\S+/.test(t.contactEmail)&&(n.contactEmail="Please enter a valid email address"),t.contactMobileNo&&!/^[0-9+\-\s()]+$/.test(t.contactMobileNo)&&(n.contactMobileNo="Please enter a valid mobile number"),t.phoneNo&&!/^[0-9+\-\s()]+$/.test(t.phoneNo)&&(n.phoneNo="Please enter a valid phone number"),m(n),Object.keys(n).length===0},f=async n=>{if(n.preventDefault(),!!b()){x(!0);try{j.put(`/office-profiles/${s.id}`,t,{onSuccess:c=>{var l;if((l=c.props.flash)!=null&&l.success&&console.log(c.props.flash.success),c.props.officeProfile)N(c.props.officeProfile);else{const u={...s,...t,updated_at:new Date().toISOString()};N(u)}},onError:c=>{m(c)},onFinish:()=>{x(!1)},preserveScroll:!0})}catch(c){console.error("Error updating office profile:",c),x(!1)}}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Office Profile"}),e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Company Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),e.jsx("input",{type:"text",name:"companyName",value:t.companyName,onChange:r,className:`input input-bordered w-full ${a.companyName?"input-error":""}`,placeholder:"Enter company name"}),a.companyName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.companyName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Type"}),e.jsxs("select",{name:"profileType",value:t.profileType,onChange:r,className:"select select-bordered w-full",children:[e.jsx("option",{value:"BranchOffice",children:"Branch Office"}),e.jsx("option",{value:"HeadOffice",children:"Head Office"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Number"}),e.jsx("input",{type:"text",name:"regNo",value:t.regNo,onChange:r,className:"input input-bordered w-full",placeholder:"Enter registration number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"text",name:"phoneNo",value:t.phoneNo,onChange:r,className:`input input-bordered w-full ${a.phoneNo?"input-error":""}`,placeholder:"Enter phone number"}),a.phoneNo&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.phoneNo})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("textarea",{name:"address",value:t.address,onChange:r,rows:"3",className:"textarea textarea-bordered w-full",placeholder:"Enter company address"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",name:"contactFirstName",value:t.contactFirstName,onChange:r,className:`input input-bordered w-full ${a.contactFirstName?"input-error":""}`,placeholder:"Enter first name"}),a.contactFirstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.contactFirstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",name:"contactLastName",value:t.contactLastName,onChange:r,className:`input input-bordered w-full ${a.contactLastName?"input-error":""}`,placeholder:"Enter last name"}),a.contactLastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.contactLastName})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"contactEmail",value:t.contactEmail,onChange:r,className:`input input-bordered w-full ${a.contactEmail?"input-error":""}`,placeholder:"Enter email address"}),a.contactEmail&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.contactEmail})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile Number"}),e.jsx("input",{type:"text",name:"contactMobileNo",value:t.contactMobileNo,onChange:r,className:`input input-bordered w-full ${a.contactMobileNo?"input-error":""}`,placeholder:"Enter mobile number"}),a.contactMobileNo&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.contactMobileNo})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Status"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"activeStatus",checked:t.activeStatus===1,onChange:n=>i(c=>({...c,activeStatus:n.target.checked?1:0})),className:"checkbox checkbox-primary mr-3"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Active Profile"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:h,className:"btn btn-outline",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn bg-blue-600 hover:bg-blue-700 text-white",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Updating..."]}):"Update Profile"})]})]})]})}):null}export{v as default};
