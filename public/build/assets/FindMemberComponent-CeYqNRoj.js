import{a as N,r as n,j as e}from"./app-C-EhCx0Q.js";function k({onClose:o,onSelectMember:p}){const{auth:d}=N().props;d==null||d.user;const[c,x]=n.useState([]),[m,l]=n.useState([]),[i,g]=n.useState(""),[t,f]=n.useState(null),[j,h]=n.useState(!0);n.useEffect(()=>{y()},[]),n.useEffect(()=>{if(!i.trim())l(c);else{const s=c.filter(r=>{const a=i.toLowerCase();return r.referral_code&&r.referral_code.toLowerCase().includes(a)||r.first_name&&r.first_name.toLowerCase().includes(a)||r.name&&r.name.toLowerCase().includes(a)||r.last_name&&r.last_name.toLowerCase().includes(a)||r.email&&r.email.toLowerCase().includes(a)});l(s)}},[i,c]);const y=async()=>{var s;try{h(!0);const r=((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||"",a=await fetch("/api/members",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":r},credentials:"same-origin"});if(a.ok){const u=await a.json();x(u.members||[]),l(u.members||[])}else x([]),l([])}catch{x([]),l([])}finally{h(!1)}},b=s=>{f(s)},v=()=>{t&&(p(t),o())};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[75vh] flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Find Member Customer"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"p-4 border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:i,onChange:s=>g(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"Search by referral code, name, or email..."}),e.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:j?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-2 text-sm",children:"Loading members..."})]}):m.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:i?"No members found matching your search":"No members available"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:m.map(s=>e.jsxs("div",{className:`border rounded-md p-2 cursor-pointer transition-all border-l-3 ${(t==null?void 0:t.id)===s.id?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":s.member_type==="paid"?"border-l-emerald-500 bg-emerald-50 hover:bg-emerald-100 border-gray-200 hover:border-emerald-300 hover:shadow-md":"border-l-gray-300 bg-gray-50 hover:bg-gray-100 opacity-75 border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,onClick:()=>b(s),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s.member_type==="paid"?"bg-emerald-100":"bg-gray-100"}`,children:e.jsx("svg",{className:`w-3 h-3 ${s.member_type==="paid"?"text-emerald-600":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{className:"ml-2 min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:`font-medium text-sm truncate ${s.member_type==="paid"?"text-emerald-900":"text-gray-700"}`,children:s.name||`${s.first_name} ${s.last_name}`.trim()}),e.jsx("span",{className:`ml-1 inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium flex-shrink-0 ${s.member_type==="paid"?"bg-emerald-100 text-emerald-800":"bg-gray-200 text-gray-600"}`,children:s.member_type==="paid"?"ðŸ’Ž":"ðŸ†“"})]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.referral_code})]})]}),(t==null?void 0:t.id)===s.id&&e.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 ml-2",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Email:"}),e.jsx("span",{className:"text-gray-900 truncate ml-2",children:s.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Phone:"}),e.jsx("span",{className:"text-gray-900",children:s.phone||"N/A"})]})]})]},s.id))})}),e.jsx("div",{className:"p-4 border-t border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"button",onClick:v,className:"px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t,children:[e.jsx("svg",{className:"w-4 h-4 mr-1 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Confirm Selection"]})]})})]})})}export{k as default};
