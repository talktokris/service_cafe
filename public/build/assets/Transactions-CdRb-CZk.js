import{r as v,u as w,j as e,H as _}from"./app-CeALoAiy.js";import k from"./MemberDashboardLayout-CNmokySY.js";import T from"./Breadcrumb-B0bvGRmj.js";import"./MemberHeader-D3KgFXep.js";import"./MemberSidebar-C5NsIFSy.js";import"./PaidMemberSidebar-CLjd9SkH.js";import"./FreeMemberSidebar-Blk_gMN0.js";import"./MemberFooter-G366-v6U.js";function W({auth:o,transactions:x,summary:s,filters:r,walletBalance:m}){const j=o.user.member_type||"free",[f,D]=v.useState({transaction_id:(r==null?void 0:r.transaction_id)||"",from_date:(r==null?void 0:r.from_date)||"",to_date:(r==null?void 0:r.to_date)||""}),{data:n,setData:c,get:h,processing:p}=w(f),N=t=>{t.preventDefault(),h("/free-transactions",{data:n,preserveState:!0,replace:!0})},y=()=>{c({transaction_id:"",from_date:"",to_date:""}),h("/free-transactions",{data:{transaction_id:"",from_date:"",to_date:""},preserveState:!0,replace:!0})},a=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(t),g=t=>new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),u=x?[...x].sort((t,d)=>d.id-t.id):[],i=[];let l=m;for(let t=0;t<u.length;t++){const d=u[t];if(t===0)i.push({...d,calculatedBalance:l});else{const b=parseFloat(d.amount)||0;d.debit_credit===1?l=l+b:l=l-b,i.push({...d,calculatedBalance:l})}}return e.jsxs(k,{title:"Transactions - Serve Cafe",user:o.user,memberType:j,walletBalance:m,children:[e.jsx(_,{title:"Transactions"}),e.jsxs("div",{children:[e.jsx(T,{title:"Transaction History",links:["Home","Transactions"],icon:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),e.jsxs("div",{className:"p-3 sm:p-4 lg:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4m16 0l-4-4m4 4l-4 4"})})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-red-600",children:"Total Debits"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-red-900",children:a((s==null?void 0:s.total_debits)||0)})]})]})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4m16 0l4-4m-4 4l4 4"})})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-green-600",children:"Total Credits"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-green-900",children:a((s==null?void 0:s.total_credits)||0)})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 sm:p-6 sm:col-span-2 lg:col-span-1",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"ml-3 sm:ml-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-600",children:"Current Balance"}),e.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-900",children:a((s==null?void 0:s.balance)||0)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-4",children:"Search Transactions"}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[e.jsx("label",{htmlFor:"transaction_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction ID"}),e.jsx("input",{type:"text",id:"transaction_id",value:n.transaction_id,onChange:t=>c("transaction_id",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-gray-900 text-sm",placeholder:"Enter transaction ID"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"from_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{type:"date",id:"from_date",value:n.from_date,onChange:t=>c("from_date",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-gray-900 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"to_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{type:"date",id:"to_date",value:n.to_date,onChange:t=>c("to_date",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-gray-900 text-sm"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsx("button",{type:"button",onClick:y,className:"w-full sm:w-auto px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500",children:"Reset"}),e.jsx("button",{type:"submit",disabled:p,className:"w-full sm:w-auto px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-amber-800 hover:bg-amber-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 disabled:opacity-50",children:p?"Searching...":"Search"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-4 sm:px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:"Transaction Statement"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:["Showing ",i.length||0," ","transactions"]})]}),e.jsx("div",{className:"block lg:hidden",children:i.length>0?e.jsx("div",{className:"divide-y divide-gray-200",children:i.map((t,d)=>e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",t.id]}),e.jsx("div",{className:"text-xs text-gray-500",children:g(t.transaction_date||t.created_at)})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.debit_credit===1?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:t.debit_credit===1?"Debit":"Credit"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.transaction_nature||"Transaction"}),e.jsx("div",{className:"text-xs text-gray-500",children:t.transaction_type}),t.order_id&&e.jsxs("div",{className:"text-xs text-blue-600 font-mono mt-1",children:["Order #",t.order_id]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Amount:"}),e.jsx("div",{className:"font-medium",children:t.debit_credit===1?"-"+a(t.amount):a(t.amount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Balance:"}),e.jsx("div",{className:"font-bold",children:a(t.calculatedBalance)})]})]})]},t.id))}):e.jsx("div",{className:"p-8 text-center text-sm text-gray-500",children:"No transactions found"})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Debit"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credit"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length>0?i.map((t,d)=>e.jsxs("tr",{className:d%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g(t.transaction_date||t.created_at)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900",children:["#",t.id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.order_id?e.jsxs("span",{className:"text-blue-600 font-mono",children:["#",t.order_id]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.transaction_nature||"Transaction"}),e.jsx("div",{className:"text-gray-500",children:t.transaction_type})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.debit_credit===1?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:t.debit_credit===1?"Debit":"Credit"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900",children:t.debit_credit===1?"-"+a(t.amount):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900",children:t.debit_credit===2?a(t.amount):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-bold text-gray-900",children:a(t.calculatedBalance)})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center text-sm text-gray-500",children:"No transactions found"})})})]})})]})]})]})]})}export{W as default};
