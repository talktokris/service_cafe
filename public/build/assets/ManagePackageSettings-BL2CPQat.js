import{r as t,j as e,H as R,L as V}from"./app-GQ-hLdfW.js";import z from"./AdminDashboardLayout-M6TtxtSS.js";import O from"./AddPackageComponent-DzgIwMwy.js";import U from"./EditPackageComponent-BomG0kfD.js";import $ from"./DeletePackageComponent-DVjRF_ck.js";import q from"./DeletePackageConfirmation-tHghRjOz.js";import G from"./LatestActivePackageCard-Bzwubslx.js";import"./AdminHeader-CSrlew2x.js";import"./AdminFooter-Ba84GTxX.js";import"./AdminSidebar-DOFZomCr.js";function re({auth:S,packages:n=[]}){const[P,v]=t.useState(!1),[L,y]=t.useState(!1),[M,x]=t.useState(!1),[A,b]=t.useState(!1),[a,d]=t.useState(null),[N,D]=t.useState(""),[o,_]=t.useState("all"),[l,B]=t.useState(1),[m]=t.useState(10),c=n.filter(s=>{var C;const r=(C=s.package_name)==null?void 0:C.toLowerCase().includes(N.toLowerCase()),H=o==="all"||o==="active"&&s.status===1||o==="inactive"&&s.status===0;return r&&H}),h=l*m,w=h-m,u=c.slice(w,h),g=Math.ceil(c.length/m),I=()=>{d(null),v(!0)},E=s=>{d(s),y(!0)},W=s=>{d(s),x(!0)},F=s=>{d(s),x(!1),b(!0)},i=()=>{v(!1),y(!1),x(!1),b(!1),d(null)},p=()=>{i(),window.location.reload()},k=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s),f=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",T=s=>s===1?e.jsx("span",{className:"badge badge-success badge-sm",children:"Active"}):e.jsx("span",{className:"badge badge-warning badge-sm",children:"Not Active"}),j=s=>{B(s)};return e.jsxs(z,{title:"Package Setup - Serve Cafe",user:S.user,children:[e.jsx(R,{title:"Package Setup"}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Package Setup"}),e.jsxs("nav",{className:"flex items-center space-x-2 text-sm mt-1",children:[e.jsx(V,{href:"/dashboard",className:"font-medium text-gray-600 hover:text-gray-900",children:"Home"}),e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.jsx("span",{className:"font-medium text-gray-700",children:"Package Setup"})]})]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Packages"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Packages"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.filter(s=>s.status===1).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Inactive Packages"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.filter(s=>s.status===0).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k(n.reduce((s,r)=>s+(r.package_amount||0),0))})]})]})})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Latest Active Package"}),e.jsx(G,{})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search packages...",value:N,onChange:s=>D(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-gray-900"})}),e.jsx("div",{children:e.jsxs("select",{value:o,onChange:s=>_(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 text-gray-900",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})})]}),e.jsxs("button",{onClick:I,className:"px-6 py-2 bg-amber-800 hover:bg-amber-900 text-white rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 transition-colors duration-200 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),e.jsx("span",{children:"Create Package"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Package Offers"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Showing ",u.length," of"," ",c.length," packages"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Package Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valid From"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valid To"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-sm text-gray-500",children:"No packages found"})}):u.map((s,r)=>e.jsxs("tr",{className:r%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.package_name||"Unnamed Package"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:k(s.package_amount||0)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f(s.valid_from_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f(s.valid_to_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T(s.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f(s.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>E(s),className:"text-amber-600 hover:text-amber-900 hover:bg-amber-50 px-2 py-1 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>W(s),className:"text-red-600 hover:text-red-900 hover:bg-red-50 px-2 py-1 rounded",children:"Delete"})]})})]},s.id))})]})}),g>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",w+1," to"," ",Math.min(h,c.length)," ","of ",c.length," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>j(l-1),disabled:l===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:g},(s,r)=>r+1).map(s=>e.jsx("button",{onClick:()=>j(s),className:`px-3 py-1 border rounded-md text-sm ${l===s?"bg-amber-800 text-white border-amber-800":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:s},s)),e.jsx("button",{onClick:()=>j(l+1),disabled:l===g,className:"px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]})]}),P&&e.jsx(O,{onClose:i,onSuccess:p}),L&&a&&e.jsx(U,{package:a,onClose:i,onSuccess:p}),M&&a&&e.jsx($,{package:a,onClose:i,onConfirm:()=>F(a)}),A&&a&&e.jsx(q,{package:a,onClose:i,onSuccess:p})]})}export{re as default};
