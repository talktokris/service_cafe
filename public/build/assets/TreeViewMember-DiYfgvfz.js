import{r as y,j as e,H as k,b as c,U as M}from"./app-GQ-hLdfW.js";import C from"./MemberDashboardLayout-0bQyLSDb.js";import B from"./Breadcrumb-k14WW90x.js";import{G as L,q as m}from"./index.module-DmcPxkHa.js";import"./MemberHeader-CeYgeBy7.js";import"./MemberSidebar-BqY_dCUI.js";import"./PaidMemberSidebar-DDEQodzl.js";import"./FreeMemberSidebar-BxCXBBEn.js";import"./MemberFooter-C2-l5f0S.js";function D({auth:p,memberType:g,treeData:d,currentRootUserId:l,parentInfo:a,loggedInUserId:n}){const b=s=>s.member_type==="paid"&&s.activeStatus===1?"bg-gradient-to-br from-teal-500 to-cyan-600":"bg-gray-300 opacity-60",[o,w]=y.useState(new Set),f=s=>{w(i=>{const t=new Set(i);return t.has(s)?t.delete(s):t.add(s),t})},j=s=>{c.visit(`/tree-view?start_user_id=${s}`,{preserveState:!1,preserveScroll:!1})},u=()=>{a&&a.id&&c.visit(`/tree-view?start_user_id=${a.id}`,{preserveState:!1,preserveScroll:!1})},v=()=>{c.visit("/tree-view",{preserveState:!1,preserveScroll:!1})},x=({node:s})=>{const i=s.children&&s.children.length>0,t=o.has(s.id),r=s.member_type==="paid"&&s.activeStatus===1;return e.jsx("div",{className:"custom-node",children:e.jsxs("div",{className:`${b(s)} text-white px-3 py-2 rounded-lg shadow-md min-w-[160px] text-left border border-white relative`,children:[s.highestBadge&&e.jsx("div",{className:`absolute -left-3 top-1/2 transform -translate-y-1/2 w-7 h-7 rounded-full bg-gradient-to-br ${s.highestBadge.color} border-2 border-white shadow-lg flex items-center justify-center`,title:s.highestBadge.name,children:e.jsx("span",{className:"text-white text-[10px] font-bold",children:s.highestBadge.initial})}),e.jsx("div",{className:`font-bold text-sm leading-tight mb-1 ml-5 ${r?"":"text-gray-600"}`,children:s.name}),e.jsx("div",{className:`text-xs font-medium leading-tight mb-2 ml-5 ${r?"text-white opacity-90":"text-gray-600 opacity-80"}`,children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 24 24",children:s.member_type==="paid"?e.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"}):e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),s.member_type==="paid"?"Paid":"Free"]})}),e.jsxs("div",{className:`text-[11px] leading-snug flex items-center gap-1.5 ml-5 ${r?"text-white opacity-90":"text-gray-700 opacity-80"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})}),e.jsx("span",{className:"truncate",children:s.phone||"No phone"})]}),e.jsxs("div",{className:`text-[11px] leading-snug flex items-center gap-1.5 ml-5 ${r?"text-white opacity-90":"text-gray-700 opacity-80"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),e.jsx("span",{className:"truncate",children:s.email||"No email"})]}),i&&e.jsx("button",{onClick:()=>f(s.id),className:"absolute -top-1.5 -right-1.5 w-5 h-5 bg-white border border-gray-300 rounded-full flex items-center justify-center hover:bg-gray-50 transition-colors text-xs",title:t?"Collapse":"Expand",children:e.jsx("span",{className:"text-gray-600 font-bold",children:t?"‚àí":"+"})}),s.hasMoreLevels&&e.jsx("button",{onClick:()=>j(s.id),className:"absolute -bottom-1.5 left-1/2 transform -translate-x-1/2 w-5 h-5 bg-yellow-400 border border-white rounded-full flex items-center justify-center hover:bg-yellow-500 transition-colors text-xs",title:"View this user's downline (5 levels)",children:e.jsx("span",{className:"text-white font-bold",children:"‚Üì"})})]})})},h=s=>{const i=o.has(s.id);return s.children&&s.children.length>0?e.jsx(m,{label:e.jsx(x,{node:s}),children:i&&s.children.map((r,N)=>e.jsx(M.Fragment,{children:h(r)},r.id||N))}):e.jsx(m,{label:e.jsx(x,{node:s})})};return e.jsxs(C,{title:"Tree View - Serve Cafe",user:p.user,memberType:g,children:[e.jsx(k,{title:"Tree View"}),e.jsx("style",{jsx:!0,children:`
                .org-chart-wrapper {
                    width: 80vw;
                    overflow: hidden;
                    border-radius: 8px;
                }

                .org-chart-container {
                    width: 100%;
                    height: 500px;
                    overflow: auto;
                    border: 1px solid #e5e7eb;
                    border-radius: 8px;
                    background: #fafafa;
                }

                .org-tree-container {
                    width: 100%;
                    padding: 20px;
                    display: flex;

                    align-items: flex-start;
                }

                .org-tree-container .org-tree-node {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    min-width: 160px;
                    max-width: 180px;
                    flex-shrink: 0;
                }

                .org-tree-container .org-tree-children {
                    display: flex;
                    justify-content: center;
                    gap: 15px;
                    margin-top: 20px;
                    width: 100%;
                }

                .custom-node {
                    display: flex;
                    justify-content: center;
                }

                .org-chart-container::-webkit-scrollbar {
                    width: 8px;
                    height: 8px;
                }

                .org-chart-container::-webkit-scrollbar-track {
                    background: #f1f1f1;
                    border-radius: 4px;
                }

                .org-chart-container::-webkit-scrollbar-thumb {
                    background: #c1c1c1;
                    border-radius: 4px;
                }

                .org-chart-container::-webkit-scrollbar-thumb:hover {
                    background: #a1a1a1;
                }
            `}),e.jsxs("div",{children:[e.jsx(B,{title:"Referral Tree View",links:["Home","Tree View"],icon:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsxs("div",{className:"p-3 sm:p-4 lg:p-6 max-w-[1200px] sm:max-w-[1400px] lg:max-w-[1500px] overflow-x-scroll overflow-y-scroll",children:[(a||l!==n)&&e.jsx("div",{className:"mb-6 bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a&&e.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),e.jsxs("span",{children:["Go Up to ",a.name]})]}),l!==n&&e.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e.jsx("span",{children:"My Tree"})]})]}),e.jsx("div",{className:"text-sm text-gray-600",children:l===n?e.jsx("span",{className:"font-semibold text-green-600",children:"üìç Viewing your tree"}):e.jsxs("span",{children:["üìç Viewing downline from User ID:"," ",l]})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("div",{className:"org-chart-wrapper",children:e.jsx("div",{className:"org-chart-container",children:e.jsx("div",{className:"org-tree-container",children:d?e.jsx(L,{lineWidth:"1px",lineColor:"#6b7280",lineBorderRadius:"8px",nodePadding:"10px",orientation:"vertical",children:h(d)}):e.jsx("div",{className:"text-center py-10",children:e.jsx("p",{className:"text-gray-500",children:"No referral data available"})})})})})})}),e.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Legend"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-teal-500 to-cyan-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active Member"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded opacity-60"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Inactive Member"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Badge Ranks (Highest to Lowest):"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-full flex items-center justify-center border border-white shadow-sm",children:e.jsx("span",{className:"text-white text-[9px] font-bold",children:"E"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Mount Everest"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-red-500 to-red-700 rounded-full flex items-center justify-center border border-white shadow-sm",children:e.jsx("span",{className:"text-white text-[9px] font-bold",children:"K"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Kanchenjunga"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center border border-white shadow-sm",children:e.jsx("span",{className:"text-white text-[9px] font-bold",children:"M"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Makalu"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-yellow-500 to-yellow-700 rounded-full flex items-center justify-center border border-white shadow-sm",children:e.jsx("span",{className:"text-white text-[9px] font-bold",children:"D"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Dhaulagiri"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-green-500 to-green-700 rounded-full flex items-center justify-center border border-white shadow-sm",children:e.jsx("span",{className:"text-white text-[9px] font-bold",children:"M"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Manaslu"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center border border-white shadow-sm",children:e.jsx("span",{className:"text-white text-[9px] font-bold",children:"A"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Annapurna"})]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center border-2 border-gray-300",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"‚Üì"})}),e.jsx("span",{className:"text-sm text-gray-700",children:"Click to view this user's downline (resets view, shows 5 levels from this user)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-white rounded-full flex items-center justify-center border-2 border-gray-300",children:e.jsx("span",{className:"text-gray-600 text-sm font-bold",children:"+"})}),e.jsx("span",{className:"text-sm text-gray-700",children:"Click to expand/collapse children in current view"})]})]})]})]})]})]})}export{D as default};
