import{r as h,j as e}from"./app-CeALoAiy.js";import b from"./ViewOrderItemComponents-BYM-UCXR.js";function N({order:s,onClose:n}){const[m,c]=h.useState(!1);console.log("Order Details Debug:",{order:s,sellingPrice:s.sellingPrice,taxAmount:s.taxAmount,discountAmount:s.discountAmount,sellingPriceType:typeof s.sellingPrice,taxAmountType:typeof s.taxAmount,discountAmountType:typeof s.discountAmount});const t=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a||0),i=a=>a?new Date(a).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A",x=a=>a.paymentStatus===1?e.jsx("span",{className:"badge badge-success badge-lg",children:"Completed"}):a.tableOccupiedStatus===1?e.jsx("span",{className:"badge badge-warning badge-lg",children:"Processing"}):e.jsx("span",{className:"badge badge-error badge-lg",children:"Cancelled"}),o=a=>{if(!a)return e.jsx("span",{className:"badge badge-ghost",children:"N/A"});const l={cash:"badge-warning",online:"badge-info",wallet:"badge-primary"}[a]||"badge-ghost";return e.jsx("span",{className:`badge ${l} badge-lg`,children:a.charAt(0).toUpperCase()+a.slice(1)})},g=a=>{const l=a==="member"?"badge-primary":"badge-secondary";return e.jsx("span",{className:`badge ${l} badge-lg`,children:a==="member"?"Member":"Walking Customer"})};return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full h-[90vh] flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Order Details - #",s.id]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Complete order information and payment details"})]}),e.jsx("button",{onClick:n,className:"btn btn-ghost btn-circle",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"p-6 space-y-6 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Order Status"}),e.jsx("div",{className:"flex items-center space-x-2",children:x(s)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Payment Method"}),e.jsx("div",{className:"flex items-center space-x-2",children:o(s.paymentType)})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Customer Type"}),e.jsx("div",{className:"flex items-center space-x-2",children:g(s.customerType)})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Information"}),s.customerType==="member"&&s.memberUser?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Name"}),e.jsxs("p",{className:"text-gray-900 font-medium",children:[s.memberUser.first_name||""," ",s.memberUser.last_name||""]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:s.memberUser.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Phone"}),e.jsx("p",{className:"text-gray-900",children:s.memberUser.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Referral Code"}),e.jsx("p",{className:"text-gray-900 font-mono",children:s.memberUser.referral_code||"N/A"})]})]}):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-gray-500",children:"Walking Customer - No member information available"})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Table Information"}),s.table?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Table Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s.table.tableShortName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Full Name"}),e.jsx("p",{className:"text-gray-900",children:s.table.tableShortFullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Occupancy Status"}),e.jsx("span",{className:`badge ${s.tableOccupiedStatus?"badge-warning":"badge-success"}`,children:s.tableOccupiedStatus?"Occupied":"Available"})]})]}):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-gray-500",children:"No table information available"})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Financial Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Buying Price"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t(s.buyingPrice)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Selling Price"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t(s.sellingPrice)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Discount Amount"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t(s.discountAmount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Tax Amount"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t(s.taxAmount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Admin Profit"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t(s.adminProfitAmount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"User Commission"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t(s.userCommissionAmount)})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"block text-lg font-bold text-gray-800",children:"Total Amount (Including Tax)"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:(()=>{const a=parseFloat(s.sellingPrice)||0,l=parseFloat(s.taxAmount)||0,r=parseFloat(s.discountAmount)||0,d=a+l-r;return console.log("Total Calculation:",{sellingPrice:a,taxAmount:l,discountAmount:r,total:d}),t(d)})()})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selling Price:"," ",t(parseFloat(s.sellingPrice)||0)," ","+ Tax:"," ",t(parseFloat(s.taxAmount)||0)," ","- Discount:"," ",t(parseFloat(s.discountAmount)||0)]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Payment Reference"}),e.jsx("p",{className:"text-gray-900 font-mono",children:s.paymentReference||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Payment Status"}),e.jsx("span",{className:`badge ${s.paymentStatus?"badge-success":"badge-warning"}`,children:s.paymentStatus?"Paid":"Pending"})]})]}),s.notes&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Notes"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:s.notes})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Timeline"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Order Started"}),e.jsx("p",{className:"text-gray-900",children:i(s.orderStaredDateTime)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Order Ended"}),e.jsx("p",{className:"text-gray-900",children:i(s.orderEndDateTime)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created At"}),e.jsx("p",{className:"text-gray-900",children:i(s.created_at)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Last Updated"}),e.jsx("p",{className:"text-gray-900",children:i(s.updated_at)})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Office Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Head Office"}),e.jsx("p",{className:"text-gray-900",children:s.headOffice?s.headOffice.companyName||`Office ${s.headOffice.id}`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Branch Office"}),e.jsx("p",{className:"text-gray-900",children:s.branch?s.branch.companyName||`Branch ${s.branch.id}`:"N/A"})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-between items-center flex-shrink-0 bg-gray-50",children:[e.jsxs("button",{onClick:()=>c(!0),className:"btn btn-primary",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"View Items"]}),e.jsx("button",{onClick:n,className:"btn btn-ghost",children:"Close"})]})]}),m&&e.jsx(b,{order:s,onClose:()=>c(!1)})]})}export{N as default};
