import{r as u,j as e}from"./app-C-EhCx0Q.js";function g({table:r,user:l,onClose:i,onConfirm:m}){const[a,o]=u.useState(!1),x=async()=>{var c;console.log("handleConfirm called"),o(!0);try{const t={headOfficeId:l.headOfficeId,branchId:l.branchId,createUserId:l.id,tableId:r.id,tableOccupiedStatus:1,buyingPrice:0,sellingPrice:0,discountAmount:0,taxAmount:0,adminProfitAmount:0,adminNetProfitAmount:0,userCommissionAmount:0,customerType:"walking",memberUserId:null,orderStaredDateTime:new Date().toISOString(),orderEndDateTime:null,paymentType:"cash",paymentReference:null,notes:null,paymentStatus:0,deleteStatus:0},d=(c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content");console.log("CSRF Token:",d),console.log("Order Data:",t);const s=await fetch("/orders",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":d||"",Accept:"application/json"},body:JSON.stringify(t)});if(console.log("Response status:",s.status),console.log("Response headers:",s.headers),!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const n=await s.json();console.log("Response result:",n),n.success?(o(!1),m()):(console.error("Error creating order:",n.message),o(!1),alert("Error creating order: "+(n.message||"Unknown error")))}catch(t){console.error("Error creating order:",t),o(!1),alert("Error creating order: "+t.message)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Table Usage"}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",disabled:a,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:r.tableShortName||"T"})}),e.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:r.tableShortName||"Table"}),e.jsx("p",{className:"text-sm text-gray-600",children:r.tableShortFullName||"Table Description"})]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-gray-700 text-lg",children:"Are you sure you want to use this table?"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This will mark the table as occupied and allow you to start taking orders."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:i,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors duration-200 font-medium",disabled:a,children:"No, Cancel"}),e.jsx("button",{onClick:x,disabled:a,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:a?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Yes, Use Table"})]})]})]})})}export{g as default};
