import{r as c,j as e,b as I}from"./app-Cy0UIO-x.js";function _({user:l,onClose:p,onSuccess:j,officeProfiles:v=[]}){const[n,d]=c.useState({first_name:"",last_name:"",name:"",email:"",phone:"",address:"",gender:"",country:"",headOfficeId:"",branchId:"",user_type:"headoffice",activeStatus:1}),[s,h]=c.useState({}),[x,u]=c.useState(!1),b=v.filter(a=>a.profileType==="HeadOffice"&&a.deleteStatus===0),g=v.filter(a=>a.profileType==="BranchOffice"&&a.deleteStatus===0);c.useEffect(()=>{l&&d({first_name:l.first_name||"",last_name:l.last_name||"",name:l.name||"",email:l.email||"",phone:l.phone||"",address:l.address||"",gender:l.gender||"",country:l.country||"",headOfficeId:l.headOfficeId||"",branchId:l.branchId||"",user_type:l.user_type||"headoffice",activeStatus:l.activeStatus||0})},[l]);const r=a=>{const{name:i,value:o,type:m,checked:S}=a.target;d(t=>({...t,[i]:m==="checkbox"?S:o})),(i==="first_name"||i==="last_name")&&d(t=>({...t,name:`${t.first_name} ${t.last_name}`.trim()})),(i==="headOfficeId"||i==="branchId")&&d(t=>{let f="headoffice";return t.branchId&&(f="branchOffice"),{...t,user_type:f}}),s[i]&&h(t=>({...t,[i]:null}))},N=()=>{const a={};return n.first_name||(a.first_name="First name is required"),n.last_name||(a.last_name="Last name is required"),n.email?/\S+@\S+\.\S+/.test(n.email)||(a.email="Email is invalid"):a.email="Email is required",n.headOfficeId||(a.headOfficeId="Head Office is required"),h(a),Object.keys(a).length===0},y=async a=>{if(a.preventDefault(),!!N()){u(!0);try{I.put(`/users/${l.id}`,n,{onSuccess:i=>{var o;if((o=i.props.flash)!=null&&o.success&&console.log(i.props.flash.success),i.props.user)j(i.props.user);else{const m={...l,...n,updated_at:new Date().toISOString()};j(m)}},onError:i=>{h(i)},onFinish:()=>{u(!1)}})}catch(i){console.error("Error updating user:",i),u(!1)}}};return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit User: ",l.first_name," ",l.last_name]}),e.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"First Name *"})}),e.jsx("input",{type:"text",name:"first_name",value:n.first_name,onChange:r,className:`input input-bordered w-full ${s.first_name?"input-error":""}`,placeholder:"Enter first name"}),s.first_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Last Name *"})}),e.jsx("input",{type:"text",name:"last_name",value:n.last_name,onChange:r,className:`input input-bordered w-full ${s.last_name?"input-error":""}`,placeholder:"Enter last name"}),s.last_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.last_name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Full Name"})}),e.jsx("input",{type:"text",name:"name",value:n.name,className:"input input-bordered w-full bg-gray-100",readOnly:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled from first and last name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Gender"})}),e.jsxs("select",{name:"gender",value:n.gender,onChange:r,className:"select select-bordered w-full",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Country"})}),e.jsxs("select",{name:"country",value:n.country,onChange:r,className:"select select-bordered w-full",children:[e.jsx("option",{value:"",children:"Select Country"}),e.jsx("option",{value:"Afghanistan",children:"Afghanistan"}),e.jsx("option",{value:"Albania",children:"Albania"}),e.jsx("option",{value:"Algeria",children:"Algeria"}),e.jsx("option",{value:"Argentina",children:"Argentina"}),e.jsx("option",{value:"Armenia",children:"Armenia"}),e.jsx("option",{value:"Australia",children:"Australia"}),e.jsx("option",{value:"Austria",children:"Austria"}),e.jsx("option",{value:"Azerbaijan",children:"Azerbaijan"}),e.jsx("option",{value:"Bahrain",children:"Bahrain"}),e.jsx("option",{value:"Bangladesh",children:"Bangladesh"}),e.jsx("option",{value:"Belarus",children:"Belarus"}),e.jsx("option",{value:"Belgium",children:"Belgium"}),e.jsx("option",{value:"Brazil",children:"Brazil"}),e.jsx("option",{value:"Bulgaria",children:"Bulgaria"}),e.jsx("option",{value:"Cambodia",children:"Cambodia"}),e.jsx("option",{value:"Canada",children:"Canada"}),e.jsx("option",{value:"Chile",children:"Chile"}),e.jsx("option",{value:"China",children:"China"}),e.jsx("option",{value:"Colombia",children:"Colombia"}),e.jsx("option",{value:"Croatia",children:"Croatia"}),e.jsx("option",{value:"Cyprus",children:"Cyprus"}),e.jsx("option",{value:"Czech Republic",children:"Czech Republic"}),e.jsx("option",{value:"Denmark",children:"Denmark"}),e.jsx("option",{value:"Egypt",children:"Egypt"}),e.jsx("option",{value:"Estonia",children:"Estonia"}),e.jsx("option",{value:"Finland",children:"Finland"}),e.jsx("option",{value:"France",children:"France"}),e.jsx("option",{value:"Georgia",children:"Georgia"}),e.jsx("option",{value:"Germany",children:"Germany"}),e.jsx("option",{value:"Ghana",children:"Ghana"}),e.jsx("option",{value:"Greece",children:"Greece"}),e.jsx("option",{value:"Hungary",children:"Hungary"}),e.jsx("option",{value:"Iceland",children:"Iceland"}),e.jsx("option",{value:"India",children:"India"}),e.jsx("option",{value:"Indonesia",children:"Indonesia"}),e.jsx("option",{value:"Iran",children:"Iran"}),e.jsx("option",{value:"Iraq",children:"Iraq"}),e.jsx("option",{value:"Ireland",children:"Ireland"}),e.jsx("option",{value:"Israel",children:"Israel"}),e.jsx("option",{value:"Italy",children:"Italy"}),e.jsx("option",{value:"Japan",children:"Japan"}),e.jsx("option",{value:"Jordan",children:"Jordan"}),e.jsx("option",{value:"Kazakhstan",children:"Kazakhstan"}),e.jsx("option",{value:"Kenya",children:"Kenya"}),e.jsx("option",{value:"Kuwait",children:"Kuwait"}),e.jsx("option",{value:"Latvia",children:"Latvia"}),e.jsx("option",{value:"Lebanon",children:"Lebanon"}),e.jsx("option",{value:"Lithuania",children:"Lithuania"}),e.jsx("option",{value:"Luxembourg",children:"Luxembourg"}),e.jsx("option",{value:"Malaysia",children:"Malaysia"}),e.jsx("option",{value:"Mexico",children:"Mexico"}),e.jsx("option",{value:"Morocco",children:"Morocco"}),e.jsx("option",{value:"Nepal",children:"Nepal"}),e.jsx("option",{value:"Netherlands",children:"Netherlands"}),e.jsx("option",{value:"New Zealand",children:"New Zealand"}),e.jsx("option",{value:"Nigeria",children:"Nigeria"}),e.jsx("option",{value:"Norway",children:"Norway"}),e.jsx("option",{value:"Oman",children:"Oman"}),e.jsx("option",{value:"Pakistan",children:"Pakistan"}),e.jsx("option",{value:"Philippines",children:"Philippines"}),e.jsx("option",{value:"Poland",children:"Poland"}),e.jsx("option",{value:"Portugal",children:"Portugal"}),e.jsx("option",{value:"Qatar",children:"Qatar"}),e.jsx("option",{value:"Romania",children:"Romania"}),e.jsx("option",{value:"Russia",children:"Russia"}),e.jsx("option",{value:"Saudi Arabia",children:"Saudi Arabia"}),e.jsx("option",{value:"Singapore",children:"Singapore"}),e.jsx("option",{value:"Slovakia",children:"Slovakia"}),e.jsx("option",{value:"Slovenia",children:"Slovenia"}),e.jsx("option",{value:"South Africa",children:"South Africa"}),e.jsx("option",{value:"South Korea",children:"South Korea"}),e.jsx("option",{value:"Spain",children:"Spain"}),e.jsx("option",{value:"Sri Lanka",children:"Sri Lanka"}),e.jsx("option",{value:"Sweden",children:"Sweden"}),e.jsx("option",{value:"Switzerland",children:"Switzerland"}),e.jsx("option",{value:"Thailand",children:"Thailand"}),e.jsx("option",{value:"Turkey",children:"Turkey"}),e.jsx("option",{value:"Ukraine",children:"Ukraine"}),e.jsx("option",{value:"United Arab Emirates",children:"United Arab Emirates"}),e.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),e.jsx("option",{value:"United States",children:"United States"}),e.jsx("option",{value:"Vietnam",children:"Vietnam"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Email *"})}),e.jsx("input",{type:"email",name:"email",value:n.email,onChange:r,className:`input input-bordered w-full ${s.email?"input-error":""}`,placeholder:"Enter email address"}),s.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Phone"})}),e.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:r,className:"input input-bordered w-full",placeholder:"Enter phone number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Address"})}),e.jsx("textarea",{name:"address",value:n.address,onChange:r,className:"textarea textarea-bordered w-full",placeholder:"Enter address",rows:"3"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Office Assignment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Head Office *"})}),e.jsxs("select",{name:"headOfficeId",value:n.headOfficeId,onChange:r,className:`select select-bordered w-full ${s.headOfficeId?"select-error":""}`,children:[e.jsx("option",{value:"",children:"Select Head Office"}),b.map(a=>e.jsx("option",{value:a.id,children:a.companyName},a.id))]}),s.headOfficeId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.headOfficeId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Branch Office"})}),e.jsxs("select",{name:"branchId",value:n.branchId,onChange:r,className:"select select-bordered w-full",children:[e.jsx("option",{value:"",children:"Select Branch Office (Optional)"}),g.map(a=>e.jsx("option",{value:a.id,children:a.companyName},a.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"User Type"})}),e.jsx("input",{type:"text",name:"user_type",value:n.user_type,className:"input input-bordered w-full bg-gray-100",readOnly:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-filled based on office selection"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Status"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"activeStatus",checked:n.activeStatus===1,onChange:a=>d(i=>({...i,activeStatus:a.target.checked?1:0})),className:"checkbox checkbox-primary mr-3"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Active Status"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:p,className:"btn btn-ghost",disabled:x,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner loading-sm mr-2"}),"Updating..."]}):"Update User"})]})]})]})}):null}export{_ as default};
